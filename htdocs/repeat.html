---
layout: vimdoc
helpname: 'repeat'
---
<a class="Constant" href="repeat.html" name="repeat.txt">*repeat.txt*</a>&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 7.3.</span>&nbsp;&nbsp;Last change: 2011 Jan 06<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VIMリファレンスマニュアル&nbsp;&nbsp;&nbsp;&nbsp;by Bram Moolenaar<br>
<br>
<br>
繰り返しコマンド、Vimスクリプトとデバッグ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#repeating" name="repeating">*repeating*</a><br>
<br>
繰り返しについてはユーザーマニュアルの26章<a class="Identifier" href="usr_26.html">|usr_26.txt|</a>に紹介があります。<br>
<br>
1. 単発繰り返し&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="repeat.html#single-repeat">|single-repeat|</a><br>
2. 多重繰り返し&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="repeat.html#multi-repeat">|multi-repeat|</a><br>
3. 複雑な繰り返し&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="repeat.html#complex-repeat">|complex-repeat|</a><br>
4. Vimスクリプトを使う&nbsp;&nbsp;<a class="Identifier" href="repeat.html#using-scripts">|using-scripts|</a><br>
5. スクリプトのデバッグ&nbsp;<a class="Identifier" href="repeat.html#debug-scripts">|debug-scripts|</a><br>
6. プロファイリング&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="repeat.html#profiling">|profiling|</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
1. 単発繰り返し&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#single-repeat" name="single-repeat">*single-repeat*</a><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#." name=".">*.*</a><br>
.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最後の変更を繰り返す。変更の回数は<span class="Special">[count]</span>で指定した回<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;数で置き換えられる。<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>に'y'フラグが含まれてる<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;時には、ヤンクコマンドも繰り返す。コマンドラインコマン<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ドは繰り返さない。<br>
<br>
単純な変更は&quot;.&quot;コマンドで繰り返すことができる。回数を指定しなければ、最後の変<br>
更の回数が使用される。回数を指定した場合、最後のそれと置き換えられる。最後に行<br>
なわれた変更が番号付きレジスタの指定を含んでいた場合、レジスタ番号は増加され<br>
る。これをどのように使うかの例は<a class="Identifier" href="undo.html#redo-register">|redo-register|</a>を参照。ビジュアル選択を使用し<br>
たコマンドを繰り返す時は、同じ「サイズ」の範囲が使用されることに注意。<br>
<a class="Identifier" href="visual.html#visual-repeat">|visual-repeat|</a>を参照。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#@:" name="@:">*@:*</a><br>
@:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最後のコマンドラインを<span class="Special">[count]</span>回繰り返す。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a class="Identifier" href="various.html#+cmdline_hist">|+cmdline_hist|</a>が無効にされていると使えない}<br>
<br>
<br>
<span class="PreProc">==============================================================================</span><br>
2. 多重繰り返し&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#multi-repeat" name="multi-repeat">*multi-repeat*</a><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:g" name=":g">*:g*</a>&nbsp;<a class="Constant" href="repeat.html#:global" name=":global">*:global*</a>&nbsp;<a class="Constant" href="repeat.html#E147" name="E147">*E147*</a>&nbsp;<a class="Constant" href="repeat.html#E148" name="E148">*E148*</a><br>
:<span class="Special">[range]</span>g[lobal]/<span class="Special">{pattern}</span>/<span class="Special">[cmd]</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[range]</span>の範囲で<span class="Special">{pattern}</span>にマッチする行に対して、Exコマ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ンド<span class="Special">[cmd]</span>(省略した場合&quot;:p&quot;)を実行する。<br>
<br>
:<span class="Special">[range]</span>g[lobal]!/<span class="Special">{pattern}</span>/<span class="Special">[cmd]</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[range]</span>の範囲で<span class="Special">{pattern}</span>にマッチしない行に対して、Exコ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;マンド<span class="Special">[cmd]</span>(省略した場合&quot;:p&quot;)を実行する。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:v" name=":v">*:v*</a>&nbsp;<a class="Constant" href="repeat.html#:vglobal" name=":vglobal">*:vglobal*</a><br>
:<span class="Special">[range]</span>v[global]/<span class="Special">{pattern}</span>/<span class="Special">[cmd]</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:g! と同じ。<br>
<br>
<span class="Special">{patter}</span>の両側の '/' の代わりにどんなシングルバイト文字でも使うことができ<br>
る。しかしアルファベット・数字・'\', '&quot;', '|' は使えない。<br>
これは、検索パターンや置換文字列に '/' が含まれる場合に便利である。<br>
<br>
パターンの定義については&nbsp;<a class="Identifier" href="pattern.html#pattern">|pattern|</a>を参照。<br>
<br>
globalコマンドの動作はまず第1に<span class="Special">[range]</span>の行をスキャンしマッチした行すべてに印を<br>
つける(複数行にかかるパターンではマッチの最初の行だけが重要である)。<br>
次のスキャンでマークされたすべての行の行番号が指定(前置)されて<span class="Special">[cmd]</span>が実行され<br>
る。行が変更されたり削除された場合そのマークは消滅する。<br>
省略した場合の<span class="Special">[range]</span>はバッファ全体(1,$)である。コマンドを中断するには&quot;<span class="Special">CTRL-C</span>&quot;<br>
を使用する。ある行についてエラーメッセージが与えられると、そのラインに対するコ<br>
マンドは中断されglobalコマンドはマッチした次の行の処理を続ける。<br>
<br>
非Exコマンドを繰り返すには&quot;:normal&quot;コマンドを使用すれば良い:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:g/pat/normal {commands}</span><br>
<span class="Special">{commands}</span>が完全なコマンドとして終了することを確認すること。そうでないとVimは<br>
全部のマッチに1つ1つについて、コマンドの残りを期待して貴方の入力を待ち続けるだ<br>
ろう。画面は更新されないので、いま何をしているのかわからないだろう。<a class="Identifier" href="various.html#:normal">|:normal|</a><br>
を参照。<br>
<br>
undo/redoコマンドはglobalコマンドを一度にundo/redoする。以前の文脈マークだけが<br>
一度設定される(&quot;''&quot;でグローバルコマンド実行前にカーソルがあった場所に戻ること<br>
が出来る)。<br>
<br>
globalコマンドは最後に使用した検索パターンと、最後に使用した置換パターンの両方<br>
を設定する(これはvi互換)。これにより全体に対して文字列置換を行なうのが簡単にな<br>
る:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:g/pat/s//PAT/g<br>
これは総ての&quot;pat&quot;を&quot;PAT&quot;に置き換える。同じことがこれでも可能:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/pat/PAT/g<br>
こっちのほうが2文字短い!<br>
<br>
Ex モード中で &quot;global&quot; を使い、そのコマンドに &quot;:visual&quot; を指定する場合はやや特<br>
殊である。これを行うと、マッチする行へ移動してノーマルモードに入るので、<a class="Identifier" href="intro.html#Q">|Q|</a>&nbsp;を<br>
押して Ex モードへ戻るまでコマンドを実行することができる。これがマッチする各行<br>
に対して繰り返される。これを行っている間は &quot;:global&quot; を使うことはできない。中<br>
止するには&nbsp;<span class="Special">CTRL-C</span>&nbsp;を2回押すこと。<br>
<br>
スペースが必要な場合には、バックスラッシュの直後に書くのがベストである。行末に<br>
スペースを書くと、視認が難しく、誤って削除されてしまうかもしれない。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:syn match Comment</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\ &quot;very long regexp&quot;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\ keepend</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
3. 複雑な繰り返し&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#complex-repeat" name="complex-repeat">*complex-repeat*</a><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#q" name="q">*q*</a>&nbsp;<a class="Constant" href="repeat.html#recording" name="recording">*recording*</a><br>
q<span class="Special">{0-9a-zA-Z&quot;}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; タイプした文字をレジスタ<span class="Special">{0-9a-zA-Z&quot;}</span>にレコーディングす<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;る(大文字なら追記)。レジスタを実行中は'q'コマンドは無<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;効化される。マッピングや&nbsp;<a class="Identifier" href="various.html#:normal">|:normal|</a>&nbsp;の中でも機能しな<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;い。&nbsp;&nbsp;<span class="Special">{Vi: レコーディングはない}</span><br>
<br>
q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; レコーディングを終了する。(実装のメモ: レコーディング<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;を終了する'q'は、それがマッピングの結果であってもレジ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;スタに記録されない)&nbsp;<span class="Special">{Vi: レコーディングはない}</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#@" name="@">*@*</a><br>
@<span class="Special">{0-9a-z&quot;.=*}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; レジスタ&nbsp;<span class="Special">{0-9a-z&quot;.=*}</span>&nbsp;の内容を&nbsp;<span class="Special">[count]</span>&nbsp;回実行する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>: レジスタ '%' (現在のファイルの名前) と '#' (オル<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;タネートファイルの名前) は使用できない。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;レジスタはマッピングと同様に実行される。つまり、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'wildchar'">'wildchar'</a>&nbsp;と&nbsp;<a class="Type" href="options.html#'wildcharm'">'wildcharm'</a>&nbsp;の違いが動作に影響する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;@=&quot; を使用すると式を入力するためのプロンプトが表示さ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;れ、そこに入力した式の評価結果が実行される。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="repeat.html#@:">|@:|</a>&nbsp;も参照。&nbsp;&nbsp;<span class="Special">{Vi: 名前付きレジスタのみ}</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#@@" name="@@">*@@*</a>&nbsp;<a class="Constant" href="repeat.html#E748" name="E748">*E748*</a><br>
@@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;直前の@<span class="Special">{0-9a-z&quot;:*}</span>を<span class="Special">[count]</span>回繰り返す。<br>
<br>
:<span class="Special">[addr]</span>*<span class="Special">{0-9a-z&quot;.=}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:@" name=":@">*:@*</a>&nbsp;<a class="Constant" href="repeat.html#:star" name=":star">*:star*</a><br>
:<span class="Special">[addr]</span>@<span class="Special">{0-9a-z&quot;.=*}</span>&nbsp;&nbsp;&nbsp;&nbsp;レジスタ<span class="Special">{0-9a-z&quot;.=*}</span>の内容をExコマンドとして実行する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;まず最初にカーソルを<span class="Special">[addr]</span>行に設定する(省略した場合現<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在の行)。レジスタの最終行に<span class="Special">&lt;CR&gt;</span>が含まれない場合、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>に'e'フラグが含まれていれば自動的に追加され<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;る。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:*&quot;コマンドは<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>に'*'フラグが含まれていた場合<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;にだけ認識されることに留意。これは<a class="Type" href="options.html#'nocompatible'">'nocompatible'</a>が使用<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;されている時にはデフォルトにはならない。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:@=&quot;には最後に評価された式が使用される。式の評価結果<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;がExコマンドとして実行される。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;これらのコマンド内ではマッピングは行なわれない。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{Vi: 幾つかのバージョンだけ}</span>&nbsp;将来: 指定された範囲の<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;各々の行にたいしてレジスタの内容が実行されるだろう。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:@:" name=":@:">*:@:*</a><br>
:<span class="Special">[addr]</span>@:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最後のコマンドラインを繰り返す。まずカーソルを<span class="Special">[addr]</span>行<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;に設定する(省略した場合現在の行)。&nbsp;<span class="Special">{Vi にはない}</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:@@" name=":@@">*:@@*</a><br>
:<span class="Special">[addr]</span>@@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最後の:@<span class="Special">{0-9a-z&quot;}</span>を繰り返す。まず最初にカーソルを<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[addr]</span>行に設定する(省略した場合現在の行)。&nbsp;<span class="Special">{Vi: 幾つか</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">のバージョンだけ}</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
4. Vimスクリプトを使う&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#using-scripts" name="using-scripts">*using-scripts*</a><br>
<br>
Vimスクリプトの書き方はユーザーマニュアルの41章<a class="Identifier" href="usr_41.html">|usr_41.txt|</a>を参照してくださ<br>
い。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:so" name=":so">*:so*</a>&nbsp;<a class="Constant" href="repeat.html#:source" name=":source">*:source*</a>&nbsp;<a class="Constant" href="repeat.html#load-vim-script" name="load-vim-script">*load-vim-script*</a><br>
:so[urce]&nbsp;<span class="Special">{file}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exコマンドを<span class="Special">{file}</span>から読込む。これは&quot;:&quot;で始まるコマン<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ドを列挙したファイルです。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(訳注:実際に&quot;:&quot;を書く必要はない)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;自動コマンド&nbsp;<a class="Identifier" href="autocmd.html#SourcePre">|SourcePre|</a>&nbsp;が発生する。<br>
<br>
:so[urce]!&nbsp;<span class="Special">{file}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vimコマンドを<span class="Special">{file}</span>から読込む。ノーマルモードでファイ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ルの内容をあなたがタイプしたのと同じように実行されま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="repeat.html#:global">|:global|</a>,&nbsp;<a class="Identifier" href="editing.html#:argdo">|:argdo|</a>,&nbsp;<a class="Identifier" href="windows.html#:windo">|:windo|</a>,&nbsp;<a class="Identifier" href="windows.html#:bufdo">|:bufdo|</a>で使ったとき、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ループ中や他のコマンドが続けられたときは、コマンドの実<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行中は表示は更新されません。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{Vi にはない}</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:ru" name=":ru">*:ru*</a>&nbsp;<a class="Constant" href="repeat.html#:runtime" name=":runtime">*:runtime*</a><br>
:ru[ntime][!]&nbsp;<span class="Special">{file}</span>&nbsp;..<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'runtimepath'">'runtimepath'</a>で示された各ディレクトリの<span class="Special">{file}</span>からEx<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コマンドを読み込みます。ファイルがなくてもエラーには<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;なりません。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:runtime syntax/c.vim</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{file}</span>には空白で区切って複数のファイルを指定できます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;指定された<span class="Special">{file}</span>は<a class="Type" href="options.html#'runtimepath'">'runtimepath'</a>の最初のディレクト<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;リ、次に二番目のディレクトリ、と検索されます。<span class="Special">{file}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;に空白を含めるにはバックスラッシュを使います(しかし<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ファイル名に空白を含めるのは望ましくありません。トラ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ブルのもとです)。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[!]を付けると見つかった全てのファイルを読み込みま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。付けなければ最初に見つかったファイルだけを読み込<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;みます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{file}</span>がワイルドカードを含んでいるとそれは展開されま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:runtime! plugin/*.vim</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; これはVimが起動時にプラグインファイルを読み込むのに<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使っているものです。次のは似ていますが:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:runtime plugin/*.vim</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; これは最初に見つかったファイルだけを読み込みます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'verbose'">'verbose'</a>が1以上ならファイルが見つからないときにメッ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;セージが表示されます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'verbose'">'verbose'</a>が2以上なら見つかった全てのファイルについて<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;メッセージが表示されます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{Vi にはない}</span><br>
<br>
:scripte[ncoding]&nbsp;<span class="Special">[encoding]</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:scripte" name=":scripte">*:scripte*</a>&nbsp;<a class="Constant" href="repeat.html#:scriptencoding" name=":scriptencoding">*:scriptencoding*</a>&nbsp;<a class="Constant" href="repeat.html#E167" name="E167">*E167*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;スクリプトで使われている文字コードを宣言します。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;それ以降の行は必要なら[encoding]から<a class="Type" href="options.html#'encoding'">'encoding'</a>オプ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ションの文字コードに変換されます。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptencoding iso-8859-5</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptencoding cp932</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[encoding]</span>が空のときは変換はされません。これは文字<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コードの変換を限定するために使います:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptencoding euc-jp</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... 変換される ...</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptencoding</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... 変換されない ...</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 変換がシステムによって提供されない場合、エラーメッ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;セージは表示されず変換もされません。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;ucs-2&quot;や&quot;ucs-4&quot;を使わないでください。スクリプトをそ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;の文字コードで書くことはできません(NULバイトが含まれ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;てしまうため)。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;スクリプトの最初にutf-8のBOM(Byte Order Mark : バイ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;トオーダーマーク)があるとVimはそれを認識します。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:scriptencoding utf-8&quot;と書く必要はありません。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vimが<a class="Identifier" href="various.html#+multi_byte">|+multi_byte|</a>付きでコンパイルされていない場合、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;このコマンドは無視されます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{Vi にはない}</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:scrip" name=":scrip">*:scrip*</a>&nbsp;<a class="Constant" href="repeat.html#:scriptnames" name=":scriptnames">*:scriptnames*</a><br>
:scrip[tnames]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;読み込まれているスクリプトを読み込まれた順番どおりに<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全て表示します。数字はスクリプトのID(識別子)<a class="Identifier" href="map.html#<SID>">|&lt;SID&gt;|</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;に使われています。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{Vi にはない}</span>&nbsp;{<a class="Identifier" href="various.html#+eval">|+eval|</a>付きでコンパイルしないと使えな<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;い}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:fini" name=":fini">*:fini*</a>&nbsp;<a class="Constant" href="repeat.html#:finish" name=":finish">*:finish*</a>&nbsp;<a class="Constant" href="repeat.html#E168" name="E168">*E168*</a><br>
:fini[sh]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; スクリプトの読み込みを停止します。スクリプトファイル<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;でのみ使えます。これはファイルの残りを読み込ませない<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ための手軽な方法です。<a class="Identifier" href="eval.html#:try">|:try|</a>を使った後で<a class="Identifier" href="eval.html#:finally">|:finally|</a>を<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;見つける前に使われると、まず&quot;:finally&quot;と<a class="Identifier" href="eval.html#:endtry">|:endtry|</a>の<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;間のコマンドが実行されます。この手続きは入れ子になっ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ている全ての&quot;:try&quot;に対して適用されます。入れ子の一番<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;外側の&quot;:endtry&quot;に達するとスクリプトを停止します。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{Vi にはない}</span><br>
<br>
総てのコマンドとコマンドシーケンスは、名前付きレジスタに格納することで繰り返し<br>
実行することができる。レジスタにコマンドを格納する方法は2つある:<br>
- 記録コマンド&quot;q&quot;を使用する。実際にコマンドをタイプし、実行しながらそれをレジ<br>
&nbsp;&nbsp;スタに格納する。今、何が起こっているかを確認できるので簡単である。間違いをし<br>
&nbsp;&nbsp;たならば、レジスタの内容をいったんファイルへ書き出(&quot;p&quot;ut)して、コマンドシー<br>
&nbsp;&nbsp;ケンスを編集して、それからそれを削除して再びレジスタに格納することができる。<br>
&nbsp;&nbsp;レジスタに追加することで継続してレコーディングすることができる(大文字を使用<br>
&nbsp;&nbsp;する)。<br>
- コマンドシーケンスを削除かヤンクしてレジスタに入れる。<br>
<br>
良く使うコマンドは':map'コマンドでファンクションキーに割当てることができる:<br>
<br>
別の方法としてコマンドをファイルに記述しておき、それを':source!'コマンドで読込<br>
んで実行するという方法もある。長いコマンドシーケンスにとっては便利である。ファ<br>
ンクションキーに複雑なコマンドを割当てるために':map'コマンドと組み合わせること<br>
ができる。<br>
<br>
':source'コマンドはファイルから一行ずつExコマンドを読込む。キーボード入力が必<br>
要になった場合にはタイプする必要が生じる。':source!'コマンドはスクリプトファイ<br>
ルから一字一句読込む。各々のキャラクタはユーザがタイプしたものとして解釈され<br>
る。<br>
<br>
例: &quot;:!ls&quot;コマンドを実行したとすると<a class="Identifier" href="message.html#hit-enter">|hit-enter|</a>プロンプトが表示される。&quot;!ls&quot;<br>
を含むファイルを':source'したならば、自分で<span class="Special">&lt;Enter&gt;</span>をタイプする必要がある<br>
だろう。しかし':!ls'を含んだファイルを':source!'したならば、<span class="Special">&lt;CR&gt;</span>が見つかるまで<br>
そのファイルから続く文字が読込まれる。&quot;:!ls&quot;がファイルの最終行でない限り、<span class="Special">&lt;CR&gt;</span><br>
を自分でタイプする必要はないだろう<br>
<br>
スクリプトファイルの中で':source[!]'コマンドを使うことも可能なので、階層関係の<br>
あるスクリプトファイルを作ることもできる。':source'コマンドは同時に開くことの<br>
できるファイル数(だいたい15)と同じだけネスト(入れ子に)することができる。<br>
':source!'コマンドは15段までネストすることができる。<br>
<br>
読込まれるファイルの中ではファイル名が必要なところに、&quot;<span class="Special">&lt;sfile&gt;</span>&quot;という文字列(<br>
文字 通りであってスペシャルキーではない)を使うことができる。この文字列は読込ま<br>
れた ファイルのファイル名に置き換えられる。例えば、&quot;.vimrc&quot;ファイルと同じ場所&nbsp;<br>
に&quot;other.vimrc&quot;というファイルがあれば、&quot;.vimrc&quot;から次のコマンドでそれを読込む&nbsp;<br>
ことができる:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:source &lt;sfile&gt;:h/other.vimrc</span><br>
<br>
スクリプトファイル内では端末依存のキーコードは端末非依存の2文字のコードで表現<br>
される。これは異なる種類の端末でも同じ方法で依存キーコードを使用できることを意<br>
味する。最初のキーコードの文字は0x80つまり128で、画面では&quot;~@&quot;と表される。2つ目<br>
のキャラクタは<a class="Identifier" href="intro.html#key-notation">|key-notation|</a>の表にて見ることができる。これらのコードはどれも<br>
<span class="Special">CTRL-V</span>に続けて3つの10進コードを叩くことで入力できる。これはtermcapコード<span class="Special">&lt;t_xx&gt;</span><br>
に対しては使用できない。これらはマッピングの中だけで使うことができる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:source_crnl" name=":source_crnl">*:source_crnl*</a>&nbsp;<a class="Constant" href="repeat.html#W15" name="W15">*W15*</a><br>
MS-DOS, Win32 and OS/2: &quot;:source&quot;で読込まれるファイルは通常、行末に<span class="Special">&lt;CR&gt;&lt;NL&gt;</span>を<br>
持っている。これらは常に働く。もしも行末に<span class="Special">&lt;NL&gt;</span>を持つファイルを使っているならば<br>
(例えばUNIXで作られたファイル)、<a class="Type" href="options.html#'fileformats'">'fileformats'</a>が空でかつ先頭行が<span class="Special">&lt;CR&gt;</span>で終わって<br>
なければ正しく認識される。しかしこれは先頭行が&quot;:map&nbsp;<span class="Special">&lt;F1&gt;</span>&nbsp;:help^M&quot;(^Mは<span class="Special">&lt;CR&gt;</span>)み<br>
たいな内容だった場合には失敗する。ファイルの先頭行が<span class="Special">&lt;CR&gt;</span>で終わっていてその1行<br>
限りの時、先頭行から<span class="Special">&lt;CR&gt;</span>が失われてしまうのでエラーメッセージが出るだろう。<br>
<br>
Mac Classic: &quot;:source&quot;で読み込まれるファイルは通常、行末に<span class="Special">&lt;CR&gt;</span>を持っている。<br>
これらは常に機能する。もしも行末に<span class="Special">&lt;NL&gt;</span>を持つファイルを使っているならば(例えば<br>
UNIXで作られたファイル)、<a class="Type" href="options.html#'fileformats'">'fileformats'</a>が空でかつ先頭行が<span class="Special">&lt;CR&gt;</span>で終わってなければ<br>
正しく認識される。先頭行に<span class="Special">&lt;CR&gt;</span>を持ち<span class="Special">&lt;NL&gt;</span>で改行しているファイルを使用しないよう<br>
に気を付けてください。<br>
<br>
その他のシステムでは、Vimは取込まれた(&quot;:source&quot;ed)ファイルの行末は<span class="Special">&lt;NL&gt;</span>であるこ<br>
とを期待する。これは常に働く。もしも行末が<span class="Special">&lt;CR&gt;&lt;NL&gt;</span>であるファイル(例えばMS-DOS<br>
で作られたファイル)を使っているならば、総ての行が末尾に<span class="Special">&lt;CR&gt;</span>を持っていることに<br>
なる。これは幾つかのコマンドにとって問題となるだろう(例、マッピング)。自動的に<br>
行末記号を検出する機構はない。なぜなら<span class="Special">&lt;CR&gt;</span>で終了するマッピングの定義をファイル<br>
の先頭に書くことは一般的で、自動検出用の仕組みを作るのが難しいからである。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#line-continuation" name="line-continuation">*line-continuation*</a><br>
読込まれた(&quot;:source&quot;d&quot;)Exコマンドスクリプトのファイル内の長い行は、行継続記号<br>
&quot;\&quot;(backslash)を次行の先頭に挿入することで分割できる。バックスラッシュの前に空<br>
白を挿入することも可能で、これらは無視される。<br>
<br>
例: 次の記述は<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set comments=sr:/*,mb:*,el:*/,</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \://,</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \b:#,</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \:%,</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \n:&gt;,</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \fb:-</span><br>
<br>
次の1行と同じ意味として解釈される:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set comments=sr:/*,mb:*,el:*/,://,b:#,:%,n:&gt;,fb:-</span><br>
<br>
バックスラッシュの前に先行する空白文字は全部無視される。しかしながらバックス<br>
ラッシュのある行の1つ前の行末には、自由に空白文字を挿入することはできない; 付<br>
加的な空白文字が許されるかどうかは、コマンドが分割される位置に依存する。<br>
<br>
&quot;:append&quot;と&quot;:insert&quot;コマンドには1つ問題がある:<br>
<span class="Comment">&nbsp;&nbsp; :1append</span><br>
<span class="Comment">&nbsp;&nbsp; \asdf</span><br>
<span class="Comment">&nbsp;&nbsp; .</span><br>
バックスラッシュは行継続シンボルに見えるが、コマンドの結果はこのようになる:<br>
<span class="Comment">&nbsp;&nbsp; :1appendasdf</span><br>
<span class="Comment">&nbsp;&nbsp; .</span><br>
これを避けるには、<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>に'C'フラグを追加することだ:<br>
<span class="Comment">&nbsp;&nbsp; :set cpo+=C</span><br>
<span class="Comment">&nbsp;&nbsp; :function Foo()</span><br>
<span class="Comment">&nbsp;&nbsp; :1append</span><br>
<span class="Comment">&nbsp;&nbsp; \asdf</span><br>
<span class="Comment">&nbsp;&nbsp; :.</span><br>
<span class="Comment">&nbsp;&nbsp; :set cpo-=C</span><br>
<br>
<span class="Todo">Note</span>&nbsp;関数の中でその手のコマンドを実行するには、関数定義の際に'C'フラグを追加す<br>
る必要があり、それが実行される際にではない。<br>
&nbsp;&nbsp; :set cpo+=C<br>
&nbsp;&nbsp; :function Foo()<br>
&nbsp;&nbsp; :1append<br>
&nbsp;&nbsp; \asdf<br>
&nbsp;&nbsp; .<br>
&nbsp;&nbsp; :endfunction<br>
&nbsp;&nbsp; :set cpo-=C<br>
<br>
解説:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;多くのプログラムは行継続を、継続する行の末尾にバックスラッシュを置くこ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;とで表現する。その方法をVimで採用してしまうと、Viとの互換性に重大な欠<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;陥ができてしまう。たとえばこのようなViのマッピングを考えるとわかりやす<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;い:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map xx&nbsp;&nbsp;asdf\</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 従って一般的ではないが行頭のバックスラッシュを採用している。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
5. スクリプトのデバッグ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#debug-scripts" name="debug-scripts">*debug-scripts*</a><br>
<br>
スクリプトの動作を知るためのコードを追加することができるのは当り前として、<br>
Vimはデバッグモードを提供しています。これはスクリプトファイルやユーザーファン<br>
クションをステップ実行することやブレークポイントを仕掛けることを可能にします。<br>
<br>
<span class="Todo">NOTE</span>: デバッグモードは未完成です。デバッグはVimの動作に副作用をあたえます。全<br>
てをデバッグするのには使えません。例えば画面がデバッグメッセージで散乱するとき<br>
など。<br>
<span class="Special">{Vi にはデバッグモードはない}</span><br>
<br>
デバッグモードの代わりに<a class="Type" href="options.html#'verbose'">'verbose'</a>オプションが使えます。大きな値を設定するとV<br>
imの動作についてより詳細なメッセージを得られます。<br>
<br>
<br>
デバッグモードを開始する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#debug-mode" name="debug-mode">*debug-mode*</a><br>
<br>
デバッグモードを開始するにはこれらの方法のうちどれかを使います:<br>
1. Vimを<a class="Identifier" href="starting.html#-D">|-D|</a>引数付きで起動する:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim -D file.txt</span><br>
&nbsp;&nbsp;&nbsp;最初にvimrcを読み込むところからデバッグを開始します。これはVimの起動時に何<br>
&nbsp;&nbsp; が起こっているのかを調査するのに便利です。副作用としてVimは初期化が完了する<br>
&nbsp;&nbsp; 前に安全のためターミナルモードを切替えます。<br>
&nbsp;&nbsp; (WindowsやMacintoshの)GUI専用バージョンではGUIウインドウを開くとすぐにデ<br>
&nbsp;&nbsp; バッグが開始します。これを早めるにはvimrcファイルに&quot;:gui&quot;と書いてください。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:debug" name=":debug">*:debug*</a><br>
2. &quot;:debug&quot;を前に付けてコマンドを実行します。そのコマンドを実行する間だけデ<br>
&nbsp;&nbsp; バッグできます。特定のスクリプトファイルやユーザー関数をデバッグするのに便<br>
&nbsp;&nbsp; 利です。オートコマンドから呼び出されるスクリプトや関数にも便利です。<br>
&nbsp;&nbsp; 例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:debug edit test.txt.gz</span><br>
<br>
3. ブレークポイントをソースファイルやユーザーファンクションに設定します。コ<br>
&nbsp;&nbsp; マンドラインから次のようにできます:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim -c &quot;breakadd file */explorer.vim&quot;</span><br>
&nbsp;&nbsp;&nbsp;これはVimを起動して&quot;explorer.vim&quot;の最初の行を読み込むところで停止します。<br>
&nbsp;&nbsp; デバッグモード中でもブレークポイントを設定できます。<br>
<br>
デバッグモード中に実行されるコマンドはそれが実行される前に表示されます。コメン<br>
トや空の行、実行されない行はとばされます。行が&quot;|&quot;を使って二つのコマンドを含ん<br>
でいた場合には分けて表示されます。<br>
<br>
<br>
デバッグモード<br>
<span class="PreProc">--------------</span><br>
<br>
デバッグモードに入ると、通常のExコマンドが使えます。例えば、変数の値を見るに<br>
は:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo idx</span><br>
ユーザーファンクション内では、これはローカル変数の&quot;idx&quot;を表示します。&quot;g:&quot;を頭<br>
に付けるとグローバル変数の値を表示します:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo g:idx</span><br>
全てのコマンドは実行中の関数やスクリプトの文脈として実行されます。オプションを<br>
設定することもできます。例えば何が起こっているのかを表示するために<a class="Type" href="options.html#'verbose'">'verbose'</a>を<br>
設定することができます。興味のある部分を実行する前に次のようにするといいでしょ<br>
う:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set verbose=20</span><br>
<br>
スクリーンの更新を必要とするコマンドは避けるべきです。なぜならデバッグモードを<br>
抜けるまでその作用に気付き難いからです。例えば:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:help</span><br>
これはとても不便です。<br>
<br>
デバッグモードのためのコマンドラインヒストリが別に用意されています。<br>
<br>
関数の行番号はその関数の始まりから数えます。見ている行の番号を数えるのに苦労す<br>
る場合はその関数の書かれたファイルを別のVimで開き、その関数の始まりを探しだ<br>
し、&quot;99j&quot;を実行してください。&quot;99&quot;は実際の行番号に合わせて変えてください。<br>
<br>
さらに、以下のコマンドが使えます:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#>cont" name="&gt;cont">*&gt;cont*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cont&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;次のブレークポイントまで実行します。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#>quit" name="&gt;quit">*&gt;quit*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;異常停止します。これは<span class="Special">CTRL-C</span>を使うことに似ていますが、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全てを停止するわけではありません。次のブレークポイント<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;で停止します。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#>next" name="&gt;next">*&gt;next*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コマンドを実行しそれが終わるとデバッグモードに戻りま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。ユーザー関数やソースファイルの呼び出し時には呼び<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出し元の次の行に進みます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#>step" name="&gt;step">*&gt;step*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;step&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コマンドを実行しそれが終わるとデバッグモードに戻りま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。ユーザー関数やソースファイルの呼び出し時には呼び<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;出し先の行に進みます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#>interrupt" name="&gt;interrupt">*&gt;interrupt*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interrupt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-C</span>を使うことに似ていますが、次のコマンドを実行する<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ためにデバッグモードに戻る場所が&quot;&gt;quit&quot;と違います。例<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;外割り込みについて<a class="Identifier" href="eval.html#:finally">|:finally|</a>や<a class="Identifier" href="eval.html#:catch">|:catch|</a>をテストするのに<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;便利です。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#>finish" name="&gt;finish">*&gt;finish*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finish&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;実行中のスクリプトやユーザー関数を終了し呼び出し元で<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;デバッグモードに戻ります。<br>
<br>
デバッグモードのコマンドについて:<br>
- 補間はできません。通常のExコマンドのみ補間できます。<br>
- 次の一文字に省略すことができます: &quot;c&quot;, &quot;n&quot;, &quot;s&quot; そして &quot;f&quot;。<br>
-&nbsp;<span class="Special">&lt;CR&gt;</span>を押すと前回のものを繰り返します。関係ないコマンドを使うとリセットされま<br>
&nbsp;&nbsp;す(どうすべきかがわかりにくいため)。<br>
- 同じ名前のExコマンドを使うにはコロンを付けてください:<br>
&nbsp;&nbsp;&quot;:cont&quot;, &quot;:next&quot;, &quot;:finish&quot; (省略時も)<br>
<br>
<br>
ブレークポイントの定義<br>
<span class="PreProc">----------------------</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:breaka" name=":breaka">*:breaka*</a>&nbsp;<a class="Constant" href="repeat.html#:breakadd" name=":breakadd">*:breakadd*</a><br>
:breaka[dd] func&nbsp;<span class="Special">[lnum]</span>&nbsp;<span class="Special">{name}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;関数にブレークポイントを設定します。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:breakadd func Explore</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 関数名が妥当かどうか検査しませので、関数定義の前にブレークポイ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ントを定義できます。<br>
<br>
:breaka[dd] file&nbsp;<span class="Special">[lnum]</span>&nbsp;<span class="Special">{name}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ソースファイルにブレークポイントを設定します。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:breakadd file 43 .vimrc</span><br>
<br>
:breaka[dd] here<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カレントファイルのカレント行にブレークポイントを設定します。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;次を行うのと同様です:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:breakadd file &lt;cursor-line&gt; &lt;current-file&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>&nbsp;これはファイルを読み込むときに実行されるコマンドに対して<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;だけ働きます。そのファイル中で定義される関数に対しては働きませ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ん。<br>
<br>
[lnum]はブレークポイントにする行番号です。Vimはその行かそれ以降で停止します。<br>
省略時すると1行目になります。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:debug-name" name=":debug-name">*:debug-name*</a><br>
<span class="Special">{name}</span>&nbsp;はファイル名や関数名のパターンです。パターンはオートコマンドで使われる<br>
ものと同じです。完全に一致しなければなりません(パターンが&quot;^&quot;で始まって&quot;$&quot;で終<br>
わるように)。&quot;*&quot;は全ての文字列に一致します。<a class="Type" href="options.html#'ignorecase'">'ignorecase'</a>は使われませんが、大文<br>
字と小文字を区別しないために&quot;\c&quot;を使うことができます<a class="Identifier" href="pattern.html#/\c">|/\c|</a>。関数名には()を付け<br>
ないでください!<br>
<br>
ソースファイル名のパターン検査はファイルのフルネームに対して行われます。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;breakadd file explorer</span><br>
パスが間違っているので一致しません。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;breakadd file *explorer.vim</span><br>
&quot;.../plugin/explorer.vim&quot;と&quot;.../plugin/iexplorer.vim&quot;に一致します。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;breakadd file */explorer.vim</span><br>
&quot;.../plugin/explorer.vim&quot;だけに一致します。<br>
<br>
関数名のパターン検査は&quot;:function&quot;で表示される名前に対して行われます。ローカ<br>
ル関数には&quot;<span class="Special">&lt;SNR&gt;</span>99_&quot;といったものが前に付くということです。<br>
<br>
<span class="Todo">Note</span>&nbsp;関数はまず読み込まれ、後で実行されます。読み込まれたときに &quot;file&quot; ブレー<br>
クポイントがチェックされ、実行されるときに &quot;func&quot; ブレークポイントがチェックさ<br>
れます。<br>
<br>
ブレークポイントの削除<br>
<span class="PreProc">----------------------</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:breakd" name=":breakd">*:breakd*</a>&nbsp;<a class="Constant" href="repeat.html#:breakdel" name=":breakdel">*:breakdel*</a>&nbsp;<a class="Constant" href="repeat.html#E161" name="E161">*E161*</a><br>
:breakd[el]&nbsp;<span class="Special">{nr}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ブレークポイント<span class="Special">{nr}</span>を削除します。<a class="Identifier" href="repeat.html#:breaklist">|:breaklist|</a>を使って番号を<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;確認してください。<br>
<br>
:breakd[el] *<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;すべてのブレークポイントを削除します。<br>
<br>
:breakd[el] func&nbsp;<span class="Special">[lnum]</span>&nbsp;<span class="Special">{name}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;関数内のブレークポイントを削除します。<br>
<br>
:breakd[el] file&nbsp;<span class="Special">[lnum]</span>&nbsp;<span class="Special">{name}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ソースファイル内のブレークポイントを削除します。<br>
<br>
:breakd[el] here<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カレントファイルのカレント行のブレークポイントを削除します。<br>
<br>
<br>
[lnum]が省略されると関数、またはファイルの最初のブレークポイントが削除されま<br>
す。<br>
<span class="Special">{name}</span>は&quot;:breakadd&quot;で使った名前と完全に同じでなければなりません。&quot;eplorer&quot;と<br>
&quot;*explorer.vim&quot;、&quot;*explorer*&quot;は違います。<br>
<br>
<br>
ブレークポイントを列挙する<br>
<span class="PreProc">--------------------------</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:breakl" name=":breakl">*:breakl*</a>&nbsp;<a class="Constant" href="repeat.html#:breaklist" name=":breaklist">*:breaklist*</a><br>
:breakl[ist]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全てのブレークポイントを列挙します。<br>
<br>
<br>
その他<br>
<span class="PreProc">------</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:debugg" name=":debugg">*:debugg*</a>&nbsp;<a class="Constant" href="repeat.html#:debuggreedy" name=":debuggreedy">*:debuggreedy*</a><br>
:debugg[reedy]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;デバッグモードのコマンドをユーザーから直接得るのではなく標準入<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;力から読み込みます。スクリプトのテストのときに便利です。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo 'q^Mq' | vim -e -s -c debuggreedy -c 'breakadd file script.vim' -S script.vim</span><br>
<br>
:0debugg[reedy]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:debuggreedy&quot;を取り消します。それ以降のデバッグモードコマンド<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;を使わず、ユーザーから直接デバッグモードコマンドを受け取りま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
6. プロファイリング&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#profile" name="profile">*profile*</a>&nbsp;<a class="Constant" href="repeat.html#profiling" name="profiling">*profiling*</a><br>
<br>
プロファイリングとは、関数やスクリプトの実行にかかる時間を計測することです。<br>
これを行うには&nbsp;<a class="Identifier" href="various.html#+profile">|+profile|</a>&nbsp;機能が必要です。<br>
この機能は &quot;huge&quot; 機能つきでコンパイルしたときだけ含まれます。<br>
<span class="Special">{Vi はプロファイリング機能を持っていない}</span><br>
<br>
また、関数&nbsp;<a class="Identifier" href="eval.html#reltime()">|reltime()|</a>&nbsp;を使っても時間を計測できます。この関数には&nbsp;<a class="Identifier" href="various.html#+reltime">|+reltime|</a><br>
機能だけが必要です。これは &quot;huge&quot; 以外でもしばしばついてきます。<br>
<br>
:prof[ile] start&nbsp;<span class="Special">{fname}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:prof" name=":prof">*:prof*</a>&nbsp;<a class="Constant" href="repeat.html#:profile" name=":profile">*:profile*</a>&nbsp;<a class="Constant" href="repeat.html#E750" name="E750">*E750*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;プロファイリングを開始し、終了時に出力を&nbsp;<span class="Special">{fname}</span>&nbsp;に出力します。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{fname}</span>&nbsp;がすでに存在するときは、警告なしに上書きされます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;変数&nbsp;<a class="Identifier" href="eval.html#v:profiling">|v:profiling|</a>&nbsp;に 1 が代入されます。<br>
<br>
:prof[ile] continue<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;:profile pause&quot; の後にこれを実行すると、プロファイリングを再<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;開します。<br>
<br>
:prof[ile] func&nbsp;<span class="Special">{pattern}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;パターン&nbsp;<span class="Special">{pattern}</span>&nbsp;にマッチする関数をプロファイリングします。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{pattern}</span>&nbsp;がどう使われるかは&nbsp;<a class="Identifier" href="repeat.html#:debug-name">|:debug-name|</a>&nbsp;を参照。<br>
<br>
:prof[ile][!] file&nbsp;<span class="Special">{pattern}</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;パターン&nbsp;<span class="Special">{pattern}</span>&nbsp;にマッチするスクリプトファイルをプロファイ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;リングします。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{pattern}</span>&nbsp;がどう使われるかは&nbsp;<a class="Identifier" href="repeat.html#:debug-name">|:debug-name|</a>&nbsp;を参照。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;このコマンドはスクリプトそのものをプロファイリングするだけで、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;その中で定義されている関数のプロファイリングは行いません。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[!] がつけられたときは、そのスクリプト中で定義されている全ての<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;関数のプロファイリングも行います。しかしスクリプトがこのコマン<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ドの後で読み込まれたときだけです。<br>
<br>
:profd[el] ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="repeat.html#:profd" name=":profd">*:profd*</a>&nbsp;<a class="Constant" href="repeat.html#:profdel" name=":profdel">*:profdel*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;指定された引数に対するプロファイリングを停止します。引数につい<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ては&nbsp;<a class="Identifier" href="repeat.html#:breakdel">|:breakdel|</a>&nbsp;を参照。<br>
<br>
最初は常に &quot;:profile start fname&quot; コマンドで始めなければなりません。結果のファ<br>
イルは Vim が終了するときに書き出されます。次に出力の例を挙げます。説明のため<br>
に行番号が行頭についています:<br>
<br>
&nbsp;&nbsp;<span class="PreProc">1 FUNCTION&nbsp;&nbsp;Test2()</span><br>
&nbsp;&nbsp;<span class="PreProc">2 Called 1 time</span><br>
&nbsp;&nbsp;<span class="PreProc">3 Total time:&nbsp;&nbsp; 0.155251</span><br>
&nbsp;&nbsp;<span class="PreProc">4&nbsp;&nbsp;Self time:&nbsp;&nbsp; 0.002006</span><br>
&nbsp;&nbsp;<span class="PreProc">5&nbsp;</span><br>
&nbsp;&nbsp;<span class="PreProc">6 count&nbsp;&nbsp;total (s)&nbsp;&nbsp; self (s)</span><br>
&nbsp;&nbsp;<span class="PreProc">7&nbsp;&nbsp;&nbsp;&nbsp; 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.000096&nbsp;&nbsp; for i in range(8)</span><br>
&nbsp;&nbsp;<span class="PreProc">8&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp; 0.153655&nbsp;&nbsp; 0.000410&nbsp;&nbsp;&nbsp;&nbsp; call Test3()</span><br>
&nbsp;&nbsp;<span class="PreProc">9&nbsp;&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.000070&nbsp;&nbsp; endfor</span><br>
&nbsp;<span class="PreProc">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot; Ask a question</span><br>
&nbsp;<span class="PreProc">11&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.001341&nbsp;&nbsp; echo input(&quot;give me an answer: &quot;)</span><br>
<br>
ヘッダ(1行目から4行目)は関数全体にかかった時間を示しています。&quot;Total&quot; はこの関<br>
数を実行している間に経過した時間です。&quot;Self&quot; は &quot;Total&quot; のうち、次のことにか<br>
かった時間を引いたものです:<br>
- 他のユーザ定義関数<br>
- スクリプトの読み込み<br>
- 自動コマンドの実行<br>
- 外部(シェル)プログラム<br>
&nbsp;&nbsp;<br>
7行目から11行目は各実行行にかかった時間を示しています。実行されない行はカウン<br>
トされません。それゆえ、コメント行は決してカウントされません。<br>
<br>
Count の桁はその行が何回実行されたかを示します。7行目の &quot;for&quot; コマンドはそれ以<br>
下の行と同様に何回も実行されることに注意してください。これは、ループの終わりを<br>
検出するためにこの行が何回も実行されるためです。<br>
<br>
ユーザ入力待ちにかかった時間は一切カウントされません。それゆえ、input() のプロ<br>
ンプトに反応するのにどれだけ時間がかかろうとも無関係です。<br>
<br>
プロファイリングはどこで時間が費やされたかのよい指標を与えてくれますが、多くの<br>
原因によりその結果がごまかされてしまう場合があるということを覚えておいてくださ<br>
い:<br>
<br>
- システム関数 gettimeofday() に依存する時間計測の精度。たとえ時間がマイクロ秒<br>
&nbsp;&nbsp;で表示されていたとしても、1/100秒の精度しかないこともあります。<br>
<br>
- 実経過時間が計測されます。他のプロセスがビジーであると、それが予測できない箇<br>
&nbsp;&nbsp;所で遅れを引き起こす可能性があります。<br>
&nbsp;&nbsp;<br>
- 1行に複数のコマンドを書いていると、1つの時間しか得られません。ここのコマンド<br>
&nbsp;&nbsp;に対して時間を見るにはその行を分割してください。<br>
&nbsp;&nbsp;<br>
- 各行の時間の総和をとると、たいてい関数全体の時間より小さくなります。各行の間<br>
&nbsp;&nbsp;にオーバーヘッドがあります。<br>
<br>
- Vim が終了する前に削除された関数はプロファイリング情報を生成しません。必要な<br>
&nbsp;&nbsp;ら変数&nbsp;<a class="Identifier" href="eval.html#v:profiling">|v:profiling|</a>&nbsp;をチェックしてください:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:if !v:profiling</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp; delfunc MyFunc</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:endif</span><br>
<br>
- マルチプロセッサシステム上では、スリープモードが作動したときや、省力のためプ<br>
&nbsp;&nbsp;ロセッサの周波数が下がったとき、プロファイリングが奇妙な結果を出すかもしれま<br>
&nbsp;&nbsp;せん。<br>
<br>
- 関数が再帰的に呼ばれた場合、&quot;self&quot; 時間は正しくでない。<br>
&nbsp;<br>
<br>
&nbsp;vim&#0058;tw=78:ts=8:ft=help:norl:<br>
