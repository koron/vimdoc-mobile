---
layout: vimdoc
helpname: 'os_win32'
---
<a class="Constant" href="os_win32.html" name="os_win32.txt">*os_win32.txt*</a>&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 7.3.</span>&nbsp;&nbsp;Last change: 2011 Aug 14<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Identifier">VIM REFERENCE MANUAL&nbsp;&nbsp;&nbsp;&nbsp;by George Reilly</span><br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32" name="win32">*win32*</a>&nbsp;<a class="Constant" href="os_win32.html#Win32" name="Win32">*Win32*</a>&nbsp;<a class="Constant" href="os_win32.html#MS-Windows" name="MS-Windows">*MS-Windows*</a><br>
このファイルはVim Win32バージョンに特有の事柄についての文書である。<br>
<br>
Win32 版の Vim は Windows NT, 95, 98, ME, XP, Vista, Windows 7 で実行可能で<br>
す。コンソール 版と GUI 版があります。<br>
<br>
32 ビット版 Vim は 64 ビット版 MS-Windows システム上でも実行可能です。<br>
<br>
Windows 3.1 [1] では Win32s サブシステムで動く GUI バージョンもあります。<br>
32 ビット DOS バージョン の Vim も使えます。<a class="Identifier" href="os_msdos.html">|os_msdos.txt|</a>&nbsp;を参照。<br>
<br>
1. 知られている問題点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_win32.html#win32-problems">|win32-problems|</a><br>
2. Vimの起動&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_win32.html#win32-startup">|win32-startup|</a><br>
3. スクリーン内容の復帰&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_win32.html#win32-restore">|win32-restore|</a><br>
4. マウスの使用&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_win32.html#win32-mouse">|win32-mouse|</a><br>
5. Windows 3.1での使用&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_win32.html#win32-win3.1">|win32-win3.1|</a><br>
6. Win32 ミニ FAQ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_win32.html#win32-faq">|win32-faq|</a><br>
<br>
付け加えて、Win32とDOS共通の項目がいくつかある:<br>
ファイルの位置&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-locations">|dos-locations|</a><br>
バックスラッシュの使用&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-backslash">|dos-backslash|</a><br>
標準のマッピング&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-standard-mappings">|dos-standard-mappings|</a><br>
画面出力とカラー&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-colors">|dos-colors|</a><br>
ファイルフォーマット&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-file-formats">|dos-file-formats|</a><br>
:cd コマンド&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-:cd">|dos-:cd|</a><br>
割り込み(インタラプト)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-CTRL-Break">|dos-CTRL-Break|</a><br>
一時ファイル&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-temp-files">|dos-temp-files|</a><br>
Shellオプションのデフォルト&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="os_dos.html#dos-shell">|dos-shell|</a><br>
<br>
Win32 GUI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="gui_w32.html#gui-w32">|gui-w32|</a><br>
<br>
クレジット:<br>
Win32バージョンはGeorge V. Reilly &lt;george@reilly.org&gt;による。<br>
オリジナルのWindows NTへの移植はRoger Knobbe &lt;RogerK@wonderware.com&gt;による。<br>
GUIバージョンはGeorge V. ReillyとRobert Webbによって作成された。<br>
<br>
コンパイルする場合は&quot;src/INSTALLpc.txt&quot;を参照。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-compiling" name="win32-compiling">*win32-compiling*</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
1. 知られている問題点&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#windows95" name="windows95">*windows95*</a>&nbsp;<a class="Constant" href="os_win32.html#win32-problems" name="win32-problems">*win32-problems*</a><br>
<br>
Windows 95のコンソール内で実行する場合、いくつかの問題点が知られている。これは<br>
我々の知る限りでは、Windows 98とWindows MEでも同じである。<br>
<br>
Microsoftに勤務している誰かからのコメント: &quot;Win95のコンソールサポートは今まで<br>
ずっと怪しいものだったし、これからもそうだろう&quot;。<br>
1.&nbsp;&nbsp;デッドキーサポートが機能しない。<br>
2.&nbsp;&nbsp;&quot;:set columns=nn lines=nn&quot;によるウィンドウのリサイズは機能するが、外部コマ<br>
&nbsp;&nbsp;&nbsp;&nbsp;ンドを実行するとシステムはハングアップ、またはクラッシュする。<br>
3.&nbsp;&nbsp;<a class="Type" href="options.html#'columns'">'columns'</a>または<a class="Type" href="options.html#'lines'">'lines'</a>の値を非DOS値に変えない限り、スクリーンの更新は遅い<br>
&nbsp;&nbsp;&nbsp;&nbsp;だろう。しかし、このときは2番目の問題に該当する！<br>
<br>
<br>
もしこれらの問題に悩んでいるなら、32ビットMS-DOSかWin32 GUIバージョンを使うと<br>
よい。<br>
<br>
ファイル名補完を行っているとき、Vimは短いファイル名への一致も見つける。しかし、<br>
それでもVimは長いファイル名への一致を見つけ、採用する。例えば、もしあなたが短<br>
いファイル名&quot;this_i~1&quot;を持つ、長いファイル名のファイル&quot;this_is_a_test&quot;を持って<br>
いるなら、コマンド&quot;:e *1&quot;は&quot;this_is_a_test&quot;の編集を始める。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
2. Vimの起動&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-startup" name="win32-startup">*win32-startup*</a><br>
<br>
カレントディレクトリ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-curdir" name="win32-curdir">*win32-curdir*</a><br>
<br>
Vimにフルパスのファイル名(&quot;x:\&quot;の形で始まる)を指定したとき、Vimはエクスプロー<br>
ラから起動されたと仮定してそのファイルのあるディレクトリをカレントディレクトリ<br>
にします。そうならないようにするにはファイルのパスにバックスラッシュ(\)の代わ<br>
りにスラッシュ(/)をを使ってください。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim c:\text\files\foo.txt</span><br>
<br>
これはカレントディレクトリを&quot;C:\text\files&quot;に変更します。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim c:/text\files\foo.txt</span><br>
<br>
こうすればカレントディレクトリを変更しません。<br>
<br>
<br>
端末オプション&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-term" name="win32-term">*win32-term*</a><br>
<br>
Win32バージョンのVimが認識できる唯一の端末の種類は&quot;win32&quot;であり、これは組み込<br>
みである。<a class="Type" href="options.html#'term'">'term'</a>に他の何かを設定すると、Vimはたぶんとても奇妙な振る舞いを見せ<br>
ることだろう。それゆえ、Vimは<a class="Type" href="options.html#'term'">'term'</a>のデフォルト値を環境変数&quot;TERM&quot;から取得しな<br>
い。<br>
<br>
$PATH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-PATH" name="win32-PATH">*win32-PATH*</a><br>
<br>
Vim 実行ファイルのディレクトリが $PATH に追加される。これは主に「ツール」メ<br>
ニューにある &quot;!xxd&quot; が動作するようにするためである。また、これにより<br>
executable() が 1 を返すときは実際にその実行ファイルが実行可能であるように<br>
なる。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
3. スクリーン内容の復帰&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-restore" name="win32-restore">*win32-restore*</a><br>
<br>
<a class="Type" href="options.html#'restorescreen'">'restorescreen'</a>がセットされているとき(これはデフォルト)、終了時、または外部コ<br>
マンド実行時、Vimはコンソールの元の内容を復帰する。これを行いたくない場合は、<br>
&quot;:set nors&quot;を使うとよい。<a class="Identifier" href="options.html#'restorescreen'">|'restorescreen'|</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
4. マウスの使用&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-mouse" name="win32-mouse">*win32-mouse*</a><br>
<br>
Win32バージョンのVimはマウスの使用をサポートする。2ボタンマウスを使用している<br>
場合、中ボタンは左と右の両方のボタンを同時に押すことによってエミュレートでき<br>
る - しかし、Win32 GUIで右ボタンクリックによるポップアップメニューを有効にし<br>
ていると(<a class="Type" href="options.html#'mouse'">'mouse'</a>を参照)、左ボタンを先にクリックした際、エラーが発生する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="term.html#mouse-using">|mouse-using|</a><br>
<br>
マウスが機能しない場合には、コンソールの&quot;Quick Edit Mode&quot;特性を無効にしてみよ。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
5. Windows 3.1での使用&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-win3.1" name="win32-win3.1">*win32-win3.1*</a><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32s" name="win32s">*win32s*</a>&nbsp;<a class="Constant" href="os_win32.html#windows-3.1" name="windows-3.1">*windows-3.1*</a><br>
Windows 3.1と3.11上で走るGvimの特殊なバージョンがある。Visual C++ 4.1でコンパ<br>
イルしたgvim.exeが必要となる。<br>
<br>
Windows 3.1上でWin32バージョンを動かすには、Win32sをインストールする必要がある。<br>
あなたは、他のWin32アプリケーションのインストールにより、すでにWin32sを持って<br>
いるかもしれない。もしVimが正しく動いていないようであれば、最新バージョン:1.30c<br>
を入手するとよいだろう。最新バージョンはここで得られる:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Constant"><a href="http://support.microsoft.com/download/support/mslfiles/pw1118.exe">http://support.microsoft.com/download/support/mslfiles/pw1118.exe</a></span><br>
<br>
(マイクロソフトはまたこれを移動した。もうどこにあるのか分からない)<br>
ヽ(`Д´)ノ　ウワァァン<br>
<br>
gvim.exeに2つのバージョンがあるのは、Win32sバージョンがVC++ 4.1でコンパイルさ<br>
れているからである。これはWin32sプログラムをサポートするVC++の最新バージョンで<br>
ある。VC++ 5.0はより良くなっているため、Win32バージョンにはこちらを使用してい<br>
る。以上の点を除けば、2つのプログラムに違いはない。もし混在した環境にいるなら、<br>
Win32s用のgvim.exeを両方で使うことができる。<br>
<br>
Win32sバージョンは、95/NT上ではWin32バージョンと同じように動く。Win32s上では、<br>
次の相違点がある:<br>
- 長いファイル名が使用できない、Windows 3.1がサポートしていないためである！<br>
- 外部コマンドを実行したとき、終了コードがリターンされない。&quot;:make&quot;の後で、自<br>
&nbsp;&nbsp;分で&quot;:cn&quot;を行う必要がある。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
6. Win32 ミニ FAQ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#win32-faq" name="win32-faq">*win32-faq*</a><br>
<br>
Q. Windows 95上で、Win32バージョンのVimの画面更新が遅いのはなぜ？<br>
A. Win32コンソールモードのアプリケーションのサポートは、Win95においては大変不<br>
&nbsp;&nbsp; 安定である。何らかの未知の理由で、Vimが標準解像度(80x25、80x43、80x50)のひ<br>
&nbsp;&nbsp; とつで走っているとき画面更新が遅くなり、16ビットDOSバージョンの方がWin32<br>
&nbsp;&nbsp; バージョンよりもはるかに速く画面更新を行うことになる。しかし、画面をその他<br>
&nbsp;&nbsp; の解像度、例えば、&quot;:set columns=100&quot;や&quot;:set lines=40&quot;など、に設定すると16<br>
&nbsp;&nbsp; ビットバージョンと同じくらいの速度で更新するようになる。<br>
<br>
&nbsp;&nbsp; 注意:&nbsp;<a class="Type" href="options.html#'columns'">'columns'</a>の変更はウィンドウの更新中にWindows 95をクラッシュさせる可能<br>
&nbsp;&nbsp; 性がある(不満があれば --&gt; Microsoft)。これはたいていの場合は機能するので、<br>
&nbsp;&nbsp; 無効にされていないが、<a class="Type" href="options.html#'columns'">'columns'</a>を変更するときは注意すること。<br>
<br>
&nbsp;&nbsp; 画面解像度の変更は更新を速くするが、また別の問題を生じる。画面が非標準の解<br>
&nbsp;&nbsp; 像度に設定されているとき、特に<a class="Type" href="options.html#'columns'">'columns'</a>が80以外の値のとき、外部コマンド(例、<br>
&nbsp;&nbsp; &quot;:!dir&quot;)がVimをフリーズさせるというものである。Vimが外部コマンド実行前に、<br>
&nbsp;&nbsp; 画面解像度を起動時の値に戻すというのは不可能であるため、<a class="Type" href="options.html#'lines'">'lines'</a>や<a class="Type" href="options.html#'columns'">'columns'</a><br>
&nbsp;&nbsp; の値を変更するときは、細心の注意を払うように。実際のところ、<a class="Type" href="options.html#'columns'">'columns'</a>の値が<br>
&nbsp;&nbsp; 80以外である場合には、Vimは外部コマンドの実行を許可しない、その後でフリーズ<br>
&nbsp;&nbsp; しやすいためである。<br>
<br>
&nbsp;&nbsp; 以上のことは、Windows NT上では全く当てはまらない。画面更新は速く、<a class="Type" href="options.html#'lines'">'lines'</a>や<br>
&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'columns'">'columns'</a>がどのような値であろうと、外部コマンドの実行がVimをフリーズさせる<br>
&nbsp;&nbsp; ことはない。<br>
<br>
Q. Win32バージョンのWindows 95上での画面更新が遅くて、16ビットDOSバージョンの<br>
&nbsp;&nbsp; 画面更新が速いのならば、どうしてWin32バージョンを使う理由があるだろうか？<br>
A. 第一に、画面が<a class="Type" href="options.html#'lines'">'lines'</a>や<a class="Type" href="options.html#'columns'">'columns'</a>の非標準の値に設定されているときは、Win32<br>
&nbsp;&nbsp; バージョンは遅くはない。第二に、16ビットDOSバージョンはいくつかの厳しい制限<br>
&nbsp;&nbsp; を受けることになる: 大きな変更ができないことと、長いファイル名に対応してい<br>
&nbsp;&nbsp; ないことである。Win32バージョンはこれらの制限を持たない上、総合的に速い(32<br>
&nbsp;&nbsp; ビットDJGPP DOSバージョンのVimにも同じことが言える)。Win32バージョンは32<br>
&nbsp;&nbsp; ビットDJGPP DOSバージョンよりも画面、マウス、キーボードの扱いが簡潔である。<br>
<br>
Q. 16ビットDOSバージョンとNT上のWin32バージョンについては？<br>
A. NT上で16ビットDOSバージョンを使うべき理由は存在しない。Win32バージョンは、<br>
&nbsp;&nbsp; NT上の16ビットバージョンと同じくらいの速さで画面を更新する。DOSバージョンに<br>
&nbsp;&nbsp; は上記の不利益がある。その上、DOSアプリケーションは起動に時間がかかり、また<br>
&nbsp;&nbsp; 実行速度も遅い。非インテルのNTプラットホーム上では、DOSバージョンは到底使え<br>
&nbsp;&nbsp; ない程に遅い、これは80x86エミュレータ上で実行されているからである。<br>
<br>
Q. フォントを変える方法は？<br>
A. GUIバージョンでは、<a class="Type" href="options.html#'guifont'">'guifont'</a>オプションを使用すればよい。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set guifont=Lucida_Console:h15:cDEFAULT</span><br>
&nbsp;&nbsp;&nbsp;コンソールバージョンでは、コンソール自体のフォントを設定する必要がある。<br>
&nbsp;&nbsp; これはVimから行うことはできない。<br>
<br>
Q. コンソールウィンドウのサイズを':set lines=xx'などで変更したとき、フォントが<br>
&nbsp;&nbsp; 変わってしまった！(Win95)<br>
A. Vimの(もしくはMS-DOSプロンプトの)プロパティで、コンソールフォントを'Auto'に<br>
&nbsp;&nbsp; 設定している。これは(悪いことに！)Win95に最適なフォントを選ばせる。かわりに<br>
&nbsp;&nbsp; はっきりとフォントを指定すればよい。<br>
<br>
Q. Windows 95上でVimへのペーストができないのだが？<br>
A. MS-DOSウィンドウのプロパティダイアログボックスで、&quot;MS-DOS プロンプト/その他<br>
&nbsp;&nbsp; /ファーストペースティング&quot;がチェックされていないことを確認する。また、予期<br>
&nbsp;&nbsp; していない効果を避けるために、Vim内で&quot;:set paste&quot;を行うべきである。<a class="Identifier" href="options.html#'paste'">|'paste'|</a><br>
<br>
Q. Windows 95上のコンソールバージョンでデッドキーを打つ方法は？<br>
&nbsp;&nbsp; (デッドキーとは、鋭アクセント、低アクセント、ウムラウトのようなアクセント<br>
&nbsp;&nbsp; キーのことで、キャラクタそのものとしては提供されないが、他のキーの後に続い<br>
&nbsp;&nbsp; て打たれて、a-acute、e-grave、u-umlaut、n-tildeなどのアクセントキャラクタを<br>
&nbsp;&nbsp; 提供するものである。多くのヨーロッパ言語で非常に有用である。われわれの知る<br>
&nbsp;&nbsp; 限り、英語キーボードのレイアウトではデッドキーは使われない。)<br>
A. できない。Windows 95ではコンソールモードの入力ルーチンは正しく機能せず、そ<br>
&nbsp;&nbsp; れらを機能させることができたこともない。マイクロソフトの熟練した開発者の言<br>
&nbsp;&nbsp; 葉によれば:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Win95のコンソールサポートは、今まで常に、そしてこれからも怪しいものだ。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我々はKEYB(これはデータを加工したがる; 国際化に重要である)のような<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MS-DOSキーボードのTSRsの世界と、Win32の世界の間に置かれているため、こ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ういった怪しさは避けがたいものである。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ゆえに、MS-DOSの世界に&quot;存在&quot;していない(デッドキーのような)キーは、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Win32コンソールの世界では非常に希薄な存在となる。MS-DOSの世界とWin32コ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ンソールの世界で、違った振舞いをする(capslockキーのような)キーは、怪し<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;げな振舞いを見せるだろう。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;多言語キーボードのレイアウトに関する問題については、考えたくもない...<br>
<br>
&nbsp;&nbsp; digraphsメカニズムによって、このような種類の働きを作り出すことができるかも<br>
&nbsp;&nbsp; しれない。<a class="Identifier" href="digraph.html#digraphs">|digraphs|</a><br>
<br>
&nbsp;&nbsp; 最もよい解決法は、Win32 GUIバージョンのgvim.exeを使うことである。その他に、<br>
&nbsp;&nbsp; デッドキーがうまく機能しているといわれている、DOSバージョンのVimのひとつを<br>
&nbsp;&nbsp; 試してみるという方法もある。<br>
<br>
Q. Windows NT上でデッドキーを打つ方法は？<br>
A. デッドキーはNT 3.51上で機能する。単に、他のアプリケーションでやっているのと<br>
&nbsp;&nbsp; 同じようにすればよい。<br>
&nbsp;&nbsp; NT 4.0では、標準のロケール(コントロールパネルのキーボードで設定する)が、現<br>
&nbsp;&nbsp; 在アクティブなロケールと同じであることを確認する必要がある。そうしないと、<br>
&nbsp;&nbsp; NTのコードは混乱しクラッシュしてしまう！ これはNT 4.0の問題であり、本質的に<br>
&nbsp;&nbsp; Vimの問題ではない。<br>
<br>
Q. VimでUnix NFSファイルサーバ上のシンボリックリンクファイルを編集している。<br>
&nbsp;&nbsp; ファイルを書込むとき、Vimはシンボリックリンクを&quot;介して書込む&quot;ことをしない。<br>
&nbsp;&nbsp; 代わりに、シンボリックリンクを削除し、その場所に新しいファイルを作成する。<br>
&nbsp;&nbsp; これは何故か？<br>
A. Unixでは、Vimはリンク(シンボリック、ハード)に対応している。オリジナルファイ<br>
&nbsp;&nbsp; ルのバックアップが作られ、そしてオリジナルファイルが上書きされる。これは<br>
&nbsp;&nbsp; ファイルの全てのプロパティが保たれることを保証する。非Unixシステムでは、オ<br>
&nbsp;&nbsp; リジナルファイルは改名され、新しいファイルが書込まれる。保護ビットのみがオ<br>
&nbsp;&nbsp; リジナルファイルと同じように設定される。しかし、これはリンクなどの機構の存<br>
&nbsp;&nbsp; 在する、NFSマウントされたファイルシステムにおいて適切に動作しない。現在の<br>
&nbsp;&nbsp; バージョンにおいてこの問題を避ける唯一の方法は、<br>
&nbsp;&nbsp; &quot;:set nobackup nowritebackup&quot;によって、バックアップファイルを作らないことで<br>
&nbsp;&nbsp; ある。<a class="Identifier" href="options.html#'writebackup'">|'writebackup'|</a><br>
<br>
Q. Samba を通して Unix ファイルサーバ上のファイルを Vim で編集している。この<br>
&nbsp;&nbsp; ファイルを書き込むと、ファイルの所有者が変わってしまう。なぜか？<br>
A. ファイルを書き込むとき、Vim は元のファイルをリネームし、それをバックアップ<br>
&nbsp;&nbsp; とする (ファイルの書き込みが途中で失敗した場合に備えるため)。そしてバッファ<br>
&nbsp;&nbsp; が新規ファイルとして書き込まれる。すると Samba はそのファイルに対してファイ<br>
&nbsp;&nbsp; ルシステムのデフォルト所有者を設定する。その結果、元の所有者と変わってしま<br>
&nbsp;&nbsp; う。これを避けるには、オプション&nbsp;<a class="Type" href="options.html#'backupcopy'">'backupcopy'</a>&nbsp;を &quot;yes&quot; にすること。すると<br>
&nbsp;&nbsp; バックアップ用に元のファイルのコピーを作ってから、元のファイルを上書き保存<br>
&nbsp;&nbsp; するようになる。こうすればファイルの所有者は変わらない。<br>
<br>
Q. &quot;:make&quot;の出力を実行中に見たい場合は？<br>
A. 基本的には、入力(この場合はmakeの出力)を標準出力とエラーファイルの両方にコ<br>
&nbsp;&nbsp; ピーする、teeプログラムを使えばよい。tee(とその他多くのGNUツール)は、<br>
&nbsp;&nbsp;&nbsp;<span class="Constant"><a href="http://gnuwin32.sourceforge.net">http://gnuwin32.sourceforge.net</a></span>&nbsp;か&nbsp;<span class="Constant"><a href="http://unxutils.sourceforge.net">http://unxutils.sourceforge.net</a></span><br>
&nbsp;&nbsp; から得られる。もしくは、最新のGNUツ ールのCygnusバージョン<br>
&nbsp;&nbsp;&nbsp;<span class="Constant"><a href="http://www.cygwin.com">http://www.cygwin.com</a></span>&nbsp;を使ってみても<br>
&nbsp;&nbsp; よい。その他のWin32用のUnixコマンドはこのサイトに列挙されている。<br>
&nbsp;&nbsp;&nbsp;<span class="Constant"><a href="http://directory.google.com/Top/Computers/Software/Operating_Systems/Unix/Win32/">http://directory.google.com/Top/Computers/Software/Operating_Systems/Unix/Win32/</a></span><br>
&nbsp;&nbsp; teeを手に入れたら、_vimrcに、以下のように設定する<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set shellpipe=\|\ tee</span><br>
<br>
<br>
Q. VisionFSが動いているリモートマシンにファイルを保存しておいたところ、それら<br>
&nbsp;&nbsp; が消えてしまった！<br>
A. VisionFSは、ある種のドット(.)と3文字の拡張子のファイル名を扱えない。SCOによ<br>
&nbsp;&nbsp; れば、この振舞いは16ビットDOS/Windows環境との互換性のために必要とされるそう<br>
&nbsp;&nbsp; である。以下の2つのコマンドで、この振舞いを実演できる:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo Hello &gt; file.bat~&nbsp;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dir &gt; file.bat</span><br>
<br>
&nbsp;&nbsp; この結果、&quot;dir&quot;コマンドは新しい&quot;file.bat&quot;というファイルを作成しないで、<br>
&nbsp;&nbsp; &quot;file.bat~&quot;を更新する。Vimにおいても、&quot;foo.bat&quot;という名前の既存のファイルを<br>
&nbsp;&nbsp; 編集するときにこれと同じことが起こる、Vimの標準の機能では、'~'をファイル名<br>
&nbsp;&nbsp; の後に付け加えてテンポラリファイルを作成するからである。ファイルが書込まれ<br>
&nbsp;&nbsp; たとき、これは上書きされる羽目になる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;解決法: _vimrcファイルに次のコマンドを加える:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set backupext=.temporary</span><br>
<br>
Q. カーソルの点滅頻度を変更する方法は？<br>
A. できない！ これはNTコンソールの制限である。NT 5.0では全てのコンソールウィン<br>
&nbsp;&nbsp; ドウに対して、同時に点滅頻度を設定できるようになるといわれている。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="os_win32.html#:!start" name=":!start">*:!start*</a><br>
Q. 非同期的に外部コマンドやプログラムを実行するにはどうしたらよいか？<br>
A. :!を使って外部コマンドを実行している場合、&quot;start&quot;と共に実行できる:<br>
<span class="Comment">&nbsp;&nbsp; :!start winfile.exe&lt;CR&gt;</span><br>
&nbsp;&nbsp;&nbsp;&quot;start&quot;を使うと、Vimは他のスクリーンに切り替えたり、新しいコンソールを開い<br>
&nbsp;&nbsp; たり、プログラムが終了するまで待ったりしなくなる; つまり、走らせるプログラ<br>
&nbsp;&nbsp; ムは編集中のファイルに何の影響も与えない。:!startで始まったプログラムは、<br>
&nbsp;&nbsp; Vimの開いたファイルハンドルを受け渡されないため、Vimより早く終了する必要は<br>
&nbsp;&nbsp; ない。<br>
&nbsp;&nbsp; このような特別な動作を避けるには &quot;:! start&quot; を使う。<br>
&nbsp;&nbsp; 利用可能な引数が二つある (次の Q 参照):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /min&nbsp;&nbsp;ウィンドウが最小化される。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /b&quot;&nbsp;&nbsp; コンソールウィンドウが表示されない。<br>
&nbsp;&nbsp; 指定できるのはどちらか一方だけです。二番目の引数が start コマンドで実行され<br>
&nbsp;&nbsp; ます。<br>
<br>
Q. プログラムを非同期で実行したときにそのウィンドウを非表示にするには？<br>
A. あなたの実際の目的に応じて二つの解決方法があります:<br>
&nbsp;&nbsp; 1) /min フラグを使ってプログラムを最小化ウィンドウで実行する (他はそのま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ま)。この方法はコンソールアプリケーションでも GUI アプリケーションでも使<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;えます。<br>
&nbsp;&nbsp; 2) /b フラグを使って、コンソールウィンドウを作成せずにコンソールアプリケー<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ションを実行する (GUI アプリケーションに対しては効果なし)。このフラグ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;は、実行するアプリケーションが入力を必要としないことがわかっている場合の<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;み使ってください。その入力ストリーム (stdin) は \\.\NUL にリダイレクトさ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;れるので (stdout と stderr も同じ)、入力が使われる場合は EOF エラーが発<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;生するでしょう。<br>
<br>
&nbsp;&nbsp; コンソールアプリケーションの例。Exuberant ctags を実行する:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!start /min ctags -R .</span><br>
&nbsp;&nbsp;&nbsp;実行が完了すると &quot;tags&quot; ファイルがカレントディレクトリに作成されます。タス<br>
&nbsp;&nbsp; クバーでウィンドウタイトルが点滅するのに気づくでしょう。時間が掛かるコマン<br>
&nbsp;&nbsp; ドならはっきりと見えます。<br>
&nbsp;&nbsp; では、&quot;tags&quot; ファイルを削除して次のコマンドを実行します:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!start /b ctags -R .</span><br>
&nbsp;&nbsp;&nbsp;先程と同じ &quot;tags&quot; ファイルが作成されますが、今回はタスクバーは点滅しませ<br>
&nbsp;&nbsp; ん。<br>
&nbsp;&nbsp; GUI アプリケーションの例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!start /min notepad</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!start /b notepad</span><br>
&nbsp;&nbsp;&nbsp;最初のコマンドは notepad を最小化状態で実行します。二番目のものは notepad<br>
&nbsp;&nbsp; を普通に実行します。<br>
<br>
Q. Win32sを使っていて、&quot;make&quot;のような外部コマンドを実行すると、Vimはそれが終わ<br>
&nbsp;&nbsp; るまでまってくれない！ どうしたよいだろう！<br>
A. この問題は、32ビットアプリケーション(Vim)が、16ビットアプリケーション(DOSの<br>
&nbsp;&nbsp; セッション)が終わったという知らせを、Windowsから受け取ることができないとい<br>
&nbsp;&nbsp; うことである。Vimはこのための働きも含んでいるが、それにはDOSコマンドをフル<br>
&nbsp;&nbsp; スクリーンではなく、ウィンドウ内で実行するように設定しなければならない。不<br>
&nbsp;&nbsp; 運にも、Windowsをインストールしたデフォルトではフルスクリーンである。これを<br>
&nbsp;&nbsp; 変更するには:<br>
&nbsp;&nbsp; 1) PIFエディタを実行。(メインプログラムグループから)<br>
&nbsp;&nbsp; 2) Windowsディレクトリの&quot;_DEFAULT.PIF&quot;ファイルを開く。<br>
&nbsp;&nbsp; 3) ディスプレイオプションを&quot;Full Screen&quot;から&quot;Windowed&quot;に変更。<br>
&nbsp;&nbsp; 4) 保存して終了。<br>
<br>
&nbsp;&nbsp; 確かめるには、Vimを実行して次のように打つ<br>
<span class="Comment">&nbsp;&nbsp; &quot;:!dir C:\&lt;CR&gt;&quot;</span><br>
&nbsp;&nbsp;&nbsp;ディレクトリの一覧と共に、DOSボックスが短い間表示されるのを見るはずだ<br>
<br>
Q. Win32sとNTでVimを使っている。NTでは、コンソールをデフォルトから50行に変える<br>
&nbsp;&nbsp; ことができ、':sh'で80x50のシェルを実行することができる。W3.1xでも同じことが<br>
&nbsp;&nbsp; できるか、あるいは80x25のままでいるしかないか？<br>
A. SYSTEM.INIを編集し、&nbsp;<span class="Special">[NonWindowsApp]</span>のセクションに'ScreenLines=50'を付け加え<br>
&nbsp;&nbsp; る。DOSプロンプトと外部DOSコマンドは50行のウィンドウで実行される。<br>
<br>
&nbsp;vim&#0058;tw=78:fo=tcq2:ts=8:ft=help:norl:<br>
