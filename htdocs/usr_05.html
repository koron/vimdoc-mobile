---
layout: vimdoc
helpname: 'usr_05'
---
<a class="Constant" href="usr_05.html" name="usr_05.txt">*usr_05.txt*</a>&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 7.3.</span>&nbsp;&nbsp;Last change: 2009 Jun 04<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VIM USER MANUAL - by Bram Moolenaar<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;設定の変更<br>
<br>
<br>
あなたの望みどおりに Vim をチューニングできます。本章では、好みの設定で Vim を<br>
起動する方法を説明します。Vim にプラグインを追加して機能拡張したり、自分でマク<br>
ロを定義する方法も説明します。<br>
<br>
<a class="Identifier" href="usr_05.html#05.1">|05.1|</a>&nbsp;&nbsp;vimrc ファイル<br>
<a class="Identifier" href="usr_05.html#05.2">|05.2|</a>&nbsp;&nbsp;見本 vimrc ファイルの解説<br>
<a class="Identifier" href="usr_05.html#05.3">|05.3|</a>&nbsp;&nbsp;簡単なマップ<br>
<a class="Identifier" href="usr_05.html#05.4">|05.4|</a>&nbsp;&nbsp;プラグインの追加<br>
<a class="Identifier" href="usr_05.html#05.5">|05.5|</a>&nbsp;&nbsp;ヘルプファイルの追加<br>
<a class="Identifier" href="usr_05.html#05.6">|05.6|</a>&nbsp;&nbsp;オプションウィンドウ<br>
<a class="Identifier" href="usr_05.html#05.7">|05.7|</a>&nbsp;&nbsp;よく使うオプション<br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_06.html">|usr_06.txt|</a>&nbsp;&nbsp;構文強調表示<br>
前章:&nbsp;<a class="Identifier" href="usr_04.html">|usr_04.txt|</a>&nbsp;&nbsp;簡単な編集<br>
目次:&nbsp;<a class="Identifier" href="usr_toc.html">|usr_toc.txt|</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_05.html#05.1" name="05.1">*05.1*</a>&nbsp;&nbsp;vimrc ファイル&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#vimrc-intro" name="vimrc-intro">*vimrc-intro*</a><br>
<br>
よく使うコマンドを入力するのが面倒に感じたことがあるでしょう。好みのオプション<br>
やマップを設定した状態で Vim を起動するには、vimrc というファイルに設定を書い<br>
てください。そのファイルに書いたコマンドは、Vim が起動するときに実行されます。<br>
<br>
すでに vimrc ファイルがある場合 (例えばシステム管理者が設置した場合など) は、<br>
次のコマンドでそのファイルを開くことができます:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edit $MYVIMRC</span><br>
<br>
vimrc ファイルがまだない場合は&nbsp;<a class="Identifier" href="starting.html#vimrc">|vimrc|</a>&nbsp;を参照して vimrc ファイルを作成する場所<br>
を確認してください。&quot;:version&quot; コマンドで表示される &quot;ユーザ vimrc&quot; の表示を見<br>
て確認することもできます。<br>
<br>
Unix と Macintosh ではこのファイルを使ってください。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">~/.vimrc</span><br>
<br>
MS-DOS と MS-Windows では次のどちらかです。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">$HOME/_vimrc</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">$VIM/_vimrc</span><br>
<br>
vimrc ファイルには、コロン (:) を押してから入力するコマンドなら、どのコマンド<br>
でも書くことができます。一番わかりやすいのはオプション設定です。例えば、毎回<br>
<a class="Type" href="options.html#'incsearch'">'incsearch'</a>&nbsp;オプションをオンに設定したい場合は、vimrc ファイルに次の一行を加え<br>
ます。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set incsearch</span><br>
<br>
この新しい行を有効にするには、Vim を終了し、再起動する必要があります。再起動し<br>
ないで設定を反映する方法は後で説明します。<br>
<br>
この章では、ごく基本的な項目だけを説明します。Vim スクリプトのより詳しい情報に<br>
ついては&nbsp;<a class="Identifier" href="usr_41.html">|usr_41.txt|</a>&nbsp;を参照してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_05.html#05.2" name="05.2">*05.2*</a>&nbsp;&nbsp;見本 vimrc ファイルの解説&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#vimrc_example.vim" name="vimrc_example.vim">*vimrc_example.vim*</a><br>
<br>
第一章では、Vim の配布物に付属の見本 vimrc ファイルを使って、非互換モード<br>
(<a class="Identifier" href="usr_01.html#not-compatible">|not-compatible|</a>参照) で Vim を起動する方法を説明しました。見本 vimrc ファイ<br>
ルは次のディレクトリにあります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">$VIMRUNTIME/vimrc_example.vim</span><br>
<br>
この節では、このファイルで使われているコマンドを説明します。自分用の設定をする<br>
ときの参考にしてください。しかし、全てを説明するわけではないので、詳しいことは<br>
&quot;:help&quot; コマンドで調べてください。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set nocompatible</span><br>
<br>
第一章で述べたように、このマニュアルでは「Vim」について説明しているので、Vi と<br>
は完全に互換性がない部分があります。動作を同じにするには、<a class="Type" href="options.html#'compatible'">'compatible'</a>&nbsp;オプ<br>
ションをオフに設定する必要があります。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set backspace=indent,eol,start</span><br>
<br>
挿入モードで&nbsp;<span class="Special">&lt;BS&gt;</span>&nbsp;を使って削除できる文字を指定しています。コンマで区切られた三<br>
つの部分はそれぞれ次の文字の削除を許可しています。<br>
&nbsp;&nbsp;&nbsp;&nbsp;indent&nbsp;&nbsp;行頭の空白<br>
&nbsp;&nbsp;&nbsp;&nbsp;eol&nbsp;&nbsp;&nbsp;&nbsp; 改行<br>
&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;&nbsp; 挿入モード開始位置より手前の文字<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set autoindent</span><br>
<br>
新しい行を作成したときに、直前の行と同じだけインデントされるようになります。つ<br>
まり、新しい行の行頭に直前の行と同じだけの空白が挿入されます。例えば、挿入モー<br>
ドで&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;キーを押したときや、&quot;o&quot; コマンドで新しい行を作成したときに機能し<br>
ます。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if has(&quot;vms&quot;)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set nobackup</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set backup</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<br>
ファイルを上書きしたときに、バックアップファイルを削除しないように指定していま<br>
す。ただし VMS システムでは OS が古いバージョンを保持してくれるので、オフにし<br>
ています。バックアップファイルのファイル名はオリジナルの名前に &quot;~&quot; を加えたも<br>
のになります。<a class="Identifier" href="usr_07.html#07.4">|07.4|</a>を参照してください。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set history=50</span><br>
<br>
コマンドを50個分、検索パターンを50個分、ヒストリ(履歴)として残します。記録の容<br>
量を増減したいときはこの値を変更してください。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set ruler</span><br>
<br>
現在のカーソル位置(行、桁)を Vim ウィンドウの右下に常に表示します。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set showcmd</span><br>
<br>
入力途中の (まだ実行していない) コマンドを Vim ウィンドウの右下 (rulerの左側)<br>
に表示します。例えば、&quot;2f&quot; と入力したとき、Vim は検索文字の入力を待っていて、<br>
画面の右下には &quot;2f&quot; と表示されます。次に &quot;w&quot; と入力すると、&quot;2fw&quot; というコマン<br>
ドが完成するので、それが実行され、画面の &quot;2f&quot; という表示も消去されます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-------------------------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|text in the Vim window&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|~&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|~&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-- VISUAL --&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2f&nbsp;&nbsp;&nbsp;&nbsp; 43,8&nbsp;&nbsp; 17% |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-------------------------------------------------+<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^^^^^^^^^^^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^^^^^^^^ ^^^^^^^^^^<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'showmode'">'showmode'</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'showcmd'">'showcmd'</a>&nbsp;&nbsp;<a class="Type" href="options.html#'ruler'">'ruler'</a><br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set incsearch</span><br>
<br>
検索パターンを入力中に、入力途中のパターンにマッチする文字列を表示します。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map Q gq</span><br>
<br>
キーマップを定義しています。詳しくは次の節で述べます。ここでは、&quot;gq&quot; オペレー<br>
タのフォーマット機能を &quot;Q&quot; コマンドとして定義しています。&quot;Q&quot; の動作が Vim 4.0<br>
以前と同じになります。実際の &quot;Q&quot; は EX モードへの移行コマンドですが、おそらく<br>
必要ないでしょう。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vnoremap _g y:exe &quot;grep /&quot; . escape(@&quot;, '\\/') . &quot;/ *.c *.h&quot;&lt;CR&gt;</span><br>
<br>
このマップは、選択されたテキストをヤンクして、それを C ファイルの中から検索し<br>
ます。これは複雑なマップです。マップを使ってとても難しいことができるということ<br>
が分かってもらえたと思います。とはいっても、実際にコマンドを手入力するのと同じ<br>
ように一連のコマンドを実行しているに過ぎません。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if &amp;t_Co &gt; 2 || has(&quot;gui_running&quot;)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;syntax on</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set hlsearch</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<br>
カラー表示が使えるかどうかを確認し、構文強調表示を有効にしています。さらに、<br>
<a class="Type" href="options.html#'hlsearch'">'hlsearch'</a>&nbsp;オプションをオンにして、検索にマッチした箇所が強調表示されるように<br>
しています。特定の条件のときだけオプションを設定したい場合は &quot;if&quot; コマンドが便<br>
利です。 詳しくは、<a class="Identifier" href="usr_41.html">|usr_41.txt|</a>を参照してください。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#vimrc-filetype" name="vimrc-filetype">*vimrc-filetype*</a>&nbsp;<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filetype plugin indent on</span><br>
<br>
三つの便利な機能を有効にしています:<br>
1. ファイルタイプの検出<br>
&nbsp;&nbsp; ファイルを開いたときに、そのファイルの種類を特定します。例えば、&quot;main.c&quot; を<br>
&nbsp;&nbsp; 開いた場合は、拡張子の &quot;.c&quot; を見てファイルタイプは &quot;c&quot; だと判断します。ファ<br>
&nbsp;&nbsp; イルの一行目が &quot;#!/bin/sh&quot; で始まっていた場合は、ファイルタイプは &quot;sh&quot; だと<br>
&nbsp;&nbsp; 判断します。<br>
&nbsp;&nbsp; 検出されたファイルタイプは構文強調と次の 2 つの項目で使われます。<br>
&nbsp;&nbsp;&nbsp;<a class="Identifier" href="filetype.html#filetypes">|filetypes|</a>参照。<br>
<br>
2. ファイルタイププラグインを使う<br>
&nbsp;&nbsp; ファイルを開いたときに、ファイルタイプに応じたオプションが設定されます。例<br>
&nbsp;&nbsp; えば、&quot;c&quot; ファイルの場合なら自動的にインデントしてくれる<a class="Type" href="options.html#'cindent'">'cindent'</a>&nbsp;オプショ<br>
&nbsp;&nbsp; ンは欠かせないでしょう。こういった、一般的に便利な設定がファイルタイププラ<br>
&nbsp;&nbsp; グインの中に入っています。自分でプラグインを追加することもできます。<br>
&nbsp;&nbsp;&nbsp;<a class="Identifier" href="usr_41.html#write-filetype-plugin">|write-filetype-plugin|</a>参照。<br>
<br>
3. インデントファイルを使う<br>
&nbsp;&nbsp; プログラミング言語のインデントはほとんど自動的に計算できます。Vim にはファ<br>
&nbsp;&nbsp; イルタイプに応じたインデントルールが数多く用意されています。<br>
&nbsp;&nbsp;&nbsp;<a class="Identifier" href="filetype.html#:filetype-indent-on">|:filetype-indent-on|</a>&nbsp;と&nbsp;<a class="Type" href="options.html#'indentexpr'">'indentexpr'</a>&nbsp;参照。<br>
<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autocmd FileType text setlocal textwidth=78</span><br>
<br>
行が長くなりすぎないように78文字で分割するように指定しています。このルールはテ<br>
キストファイルにだけ適用されます。この記述には二つの要素があります。&quot;autocmd<br>
FileType text&quot; はオートコマンド定義です。この場合、ファイルタイプが &quot;text&quot; に<br>
設定されたときに、指定したコマンドが自動的に実行されます。&quot;setlocal<br>
textwidth=78&quot; はそのファイルの&nbsp;<a class="Type" href="options.html#'textwidth'">'textwidth'</a>&nbsp;オプションを 78 に設定しています。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#restore-cursor" name="restore-cursor">*restore-cursor*</a>&nbsp;<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autocmd BufReadPost *</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\ if line(&quot;'\&quot;&quot;) &gt; 1 &amp;&amp; line(&quot;'\&quot;&quot;) &lt;= line(&quot;$&quot;) |</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&nbsp;&nbsp; exe &quot;normal! g`\&quot;&quot; |</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\ endif</span><br>
<br>
オートコマンドをもう一つ。ファイルを読み込んだ直後に実行されるオートコマンドを<br>
定義しています。後ろのごちゃごちゃした部分は「'&quot; マークが定義されているかどう<br>
かをチェックし、定義があればそこにジャンプする」という意味です。コマンドを複数<br>
行に分けて書くために、行頭に &quot;\&quot; を書いています。行がやたらと長くなるのを防ぐ<br>
ためです。<a class="Identifier" href="repeat.html#line-continuation">|line-continuation|</a>参照。&quot;\&quot; は Vim スクリプト内でのみ使えます。コマ<br>
ンドラインで入力するときは使えません。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_05.html#05.3" name="05.3">*05.3*</a>&nbsp;&nbsp;簡単なマップ<br>
<br>
マップを使うと、複数のコマンドを 1 つのキー繰作にまとめることができます。例え<br>
ば、ある単語を {} で囲みたいとします。つまり、&quot;amount&quot; を &quot;<span class="Special">{amount}</span>&quot; にしたい<br>
わけです。:map コマンドを使って、その操作を&nbsp;<span class="Special">&lt;F5&gt;</span>&nbsp;キーに割り当てることができま<br>
す。次のように書きます。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map &lt;F5&gt; i{&lt;Esc&gt;ea}&lt;Esc&gt;</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Todo">Note</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;このコマンドを入力するときの注意点。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;F5&gt;</span>&nbsp;見たままのは 4 文字の文字列として入力してください。<span class="Special">&lt;Esc&gt;</span>&nbsp;も同じで<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;す。<span class="Special">&lt;Esc&gt;</span>&nbsp;キーを押すのではなく、 5 文字の文字列として入力してください。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;このマニュアルを読むときはその違いに注意してください !<br>
<br>
この定義を分解してみましょう。<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">&lt;F5&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ファンクションキーのF5です。このキーを押すと、定義してあるコマ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ンドが実行されます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;i{<span class="Special">&lt;Esc&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp; &quot;{&quot; 文字を挿入し、<span class="Special">&lt;Esc&gt;</span>&nbsp;キーで挿入モードから抜けます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;e&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 単語の末尾に移動します。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;a}<span class="Special">&lt;Esc&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp; &quot;}&quot; 文字を追加します。<br>
<br>
この &quot;:map&quot; コマンドを実行した後は、カーソルを単語の先頭に動かして F5 キーを押<br>
すだけで単語の両側に {} を追加できます。<br>
<br>
この例では、コマンドは 1 キーでしたが、どの文字列でも割り当てることができます。<br>
ただし、Vim のコマンドと同じ文字列を割り当てると、元のコマンドが使えなくなるの<br>
で、それは避けた方が無難です。<br>
複数キーを組み合わせるときには、バックスラッシュ(日本語環境では円記号)がよく使<br>
われます。マップをたくさん定義したい場合は、複数文字を使ってください。例えば、<br>
単語を () で囲むには &quot;\p&quot; で、単語を {} で囲むには &quot;\c&quot; で、といったことができ<br>
ます。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map \p i(&lt;Esc&gt;ea)&lt;Esc&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map \c i{&lt;Esc&gt;ea}&lt;Esc&gt;</span><br>
<br>
&quot;\&quot; と &quot;p&quot; はくっつけてください。そうすれば Vim は 2 文字のマップだと認識でき<br>
ます。<br>
<br>
引数なしの &quot;:map&quot; コマンドで現在のマップ定義の一覧を表示できます。表示された<br>
マップは、少なくともノーマルモードで使えます。より詳しくは<a class="Identifier" href="usr_40.html#40.1">|40.1|</a>章を参照してく<br>
ださい。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_05.html#05.4" name="05.4">*05.4*</a>&nbsp;&nbsp;プラグインの追加&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#add-plugin" name="add-plugin">*add-plugin*</a>&nbsp;<a class="Constant" href="usr_05.html#plugin" name="plugin">*plugin*</a><br>
<br>
プラグインを追加することで機能拡張できます。プラグインといっても、Vimが起動さ<br>
れたときに自動的に読み込まれるだけの、ただの Vim スクリプトファイルです。ファ<br>
イルをプラグインディレクトリにコピーするだけで簡単にプラグインを追加できます。<br>
{<a class="Identifier" href="various.html#+eval">|+eval|</a>が有効な場合のみ利用できます}<br>
<br>
2 種類のプラグインがあります。<br>
<br>
&nbsp;&nbsp;グローバルプラグイン&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全種類のファイルで使われるプラグイン<br>
&nbsp;&nbsp;ファイルタイププラグイン&nbsp;&nbsp;特定タイプのファイルでのみ使われるプラグイン<br>
<br>
まず、グローバルプラグインについて説明し、次にファイルタイププラグインの説明<br>
<a class="Identifier" href="usr_05.html#add-filetype-plugin">|add-filetype-plugin|</a>をします。<br>
<br>
<br>
グローバルプラグイン&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#standard-plugin" name="standard-plugin">*standard-plugin*</a><br>
<span class="PreProc">--------------------</span><br>
<br>
Vim を起動すると、自動的にいくつものグローバルプラグインがロードされます。特に<br>
何もしなくて大丈夫です。グローバルプラグインは、ほとんどの人が欲しいと思うだろ<br>
う機能を提供しています。それらの機能は Vim の中にコンパイルして組み込まれてい<br>
るのではなく、Vim スクリプトとして実装されています。ヘルプの目次にプラグインの<br>
一覧があります<a class="Identifier" href="index.html#standard-plugin-list">|standard-plugin-list|</a>。<a class="Identifier" href="starting.html#load-plugins">|load-plugins|</a>も参照してください。<br>
<br>
<span class="Statement">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a class="Constant" href="usr_05.html#add-global-plugin" name="add-global-plugin">*add-global-plugin*</a><br>
グローバルプラグインを追加すると、いつでもその機能を使えるようになります。<br>
グローバルプラグインを追加するのは簡単です。<br>
1. プラグインを入手する<br>
2. 正しいディレクトリにコピーする<br>
<br>
<br>
グローバルプラグインを入手する<br>
<span class="PreProc">------------------------------</span><br>
<br>
プラグインはどこにありますか？<br>
- Vim の配布物にいくつか含まれています。$VIMRUNTIME/macros ディレクトリをご覧<br>
&nbsp;&nbsp;ください<br>
- インターネットからダウンロードする。たくさんのプラグインが<br>
&nbsp;&nbsp;<span class="Constant"><a href="http://www.vim.org">http://www.vim.org</a></span>&nbsp;にあります。<br>
- Vim のメーリングリスト<a class="Identifier" href="intro.html#maillist">|maillist|</a>に投稿されることもあります。<br>
- あなたが自作することもできます。プラグインの書き方<a class="Identifier" href="usr_41.html#write-plugin">|write-plugin|</a>をどうぞ。<br>
<br>
いくつかのプラグインは vimball アーカイブで配布されています。<a class="Identifier" href="pi_vimball.html#vimball">|vimball|</a>参照。<br>
いくつかのプラグインは自動更新可能です。<a class="Identifier" href="pi_getscript.html#getscript">|getscript|</a>参照。<br>
<br>
<br>
グローバルプラグインを使う<br>
<span class="PreProc">--------------------------</span><br>
<br>
まず、プラグイン自身のドキュメントを読んで、動作条件を確認してください。<br>
次にそれをプラグインディレクトリにコピーします。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">system&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plugin directory</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~/.vim/plugin/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC や OS/2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$HOME/vimfiles/plugin or $VIM/vimfiles/plugin<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amiga&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s:vimfiles/plugin<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Macintosh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $VIM:vimfiles:plugin<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mac OS X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~/.vim/plugin/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RISC-OS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Choices:vimfiles.plugin<br>
<br>
Unixの場合の例 (プラグインディレクトリがまだない場合)<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir ~/.vim</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir ~/.vim/plugin</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp /usr/local/share/vim/vim60/macros/justify.vim ~/.vim/plugin</span><br>
<br>
これだけです。vimを再起動するとプラグインで定義されたコマンドが使えます。<br>
<br>
plugin/ ディレクトリ以下にファイルを置く代わりに、それらのファイルを plugin/<br>
ディレクトリ以下のサブディレクトリに置くこともできます。例えば、Perl 用のプラ<br>
グインを &quot;~/.vim/plugin/perl/*.vim&quot; に置いたりできます。<br>
<br>
<br>
ファイルタイププラグイン&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#add-filetype-plugin" name="add-filetype-plugin">*add-filetype-plugin*</a>&nbsp;<a class="Constant" href="usr_05.html#ftplugins" name="ftplugins">*ftplugins*</a><br>
<span class="PreProc">------------------------</span><br>
<br>
Vim の配布パッケージにはたくさんのファイルタイププラグインが入っています。<br>
次のコマンドで利用開始できます。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:filetype plugin on</span><br>
<br>
これだけです。<a class="Identifier" href="usr_05.html#vimrc-filetype">|vimrc-filetype|</a>も参照してください。<br>
<br>
使いたいファイルタイププラグインがない場合や、標準より良いものを見つけた場合<br>
は、追加することもできます。ファイルタイププラグインの追加は次の手順で行いま<br>
す:<br>
1. プラグインを入手する<br>
2. 正しいディレクトリにコピーする<br>
<br>
<br>
ファイルタイププラグインを入手する<br>
<span class="PreProc">----------------------------------</span><br>
<br>
ファイルタイププラグインもグローバルプラグインと同じ方法で入手できます。プラグ<br>
インの種類が記載されているのでそれを見て、そのプラグインがグローバルプラグイン<br>
かファイルタイププラグインか確認してください。$VIMRUNTIME/macros に入っている<br>
のはグローバルプラグインです。$VIMRUNTIME/ftplugin に入っているのはファイルタ<br>
イププラグインです。<br>
<br>
<br>
ファイルタイププラグインを使う&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#ftplugin-name" name="ftplugin-name">*ftplugin-name*</a><br>
<span class="PreProc">------------------------------</span><br>
<br>
ファイルタイププラグインは正しいディレクトリにコピーするだけで追加できます。<br>
ディレクトリの場所はグローバルプラグインと同じですが、ディレクトリ名の最後の部<br>
分が &quot;ftplugin&quot; となります。例えば &quot;stuff&quot; ファイルタイプ用のプラグインを Unix<br>
システムに入れるとしましょう。入手したファイルを次のコマンドで ftplugin ディレ<br>
クトリに移します:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mv thefile ~/.vim/ftplugin/stuff.vim</span><br>
<br>
そのファイルがすでにある場合は、既存のプラグインと追加しようとしているプラグイ<br>
ンを同時に使っても問題ないかどうか確認してください。問題がなければ別の名前に変<br>
えましょう:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mv thefile ~/.vim/ftplugin/stuff_too.vim</span><br>
<br>
アンダースコアはファイルタイプの名前とそれ以外を区切るのに使います。アンダース<br>
コア以降はどんな文字列でも構いません。しかし、&quot;otherstuff.vim&quot; といった名前に<br>
した場合はうまく動きません。そのファイルは &quot;otherstuff&quot; というファイルタイプの<br>
ときにだけロードされます。<br>
<br>
MS-DOS では長いファイル名が使えません。プラグインを追加するときに、ファイルタ<br>
イプ名が 6 文字以上だと問題が生じます。そういうときはさらにディレクトリを掘っ<br>
てください:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir $VIM/vimfiles/ftplugin/fortran</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copy thefile $VIM/vimfiles/ftplugin/fortran/too.vim</span><br>
<br>
ファイルタイププラグインの名前付けルールは次の通りです:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ftplugin/&lt;filetype&gt;.vim</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ftplugin/&lt;filetype&gt;_&lt;name&gt;.vim</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ftplugin/&lt;filetype&gt;/&lt;name&gt;.vim</span><br>
<br>
&quot;<span class="Special">&lt;name&gt;</span>&quot; の部分はどんな文字列でも構いません。<br>
以下は Unix での &quot;stuff&quot; ファイルタイプの例です:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~/.vim/ftplugin/stuff.vim</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~/.vim/ftplugin/stuff_def.vim</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~/.vim/ftplugin/stuff/header.vim</span><br>
<br>
<span class="Special">&lt;filetype&gt;</span>&nbsp;の部分はプラグインの対象になっているファイルタイプ名です。同じファ<br>
イルタイプのファイルだけがそのプラグインを使います。<span class="Special">&lt;name&gt;</span>&nbsp;の部分は無視されま<br>
す。一つのファイルタイプに複数のプラグインを登録する場合に使ってください。<br>
<span class="Todo">Note</span>: ファイルの拡張子は必ず &quot;.vim&quot; にしてください。<br>
<br>
<br>
詳しくは以下を参照してください:<br>
<a class="Identifier" href="filetype.html#filetype-plugins">|filetype-plugins|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ファイルタイププラグインについてのドキュメントと、マッ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;プで問題が発生した場合の対処方法。<br>
<a class="Identifier" href="starting.html#load-plugins">|load-plugins|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;起動時にロードされるグローバルプラグイン。<br>
<a class="Identifier" href="filetype.html#ftplugin-overrule">|ftplugin-overrule|</a>&nbsp;&nbsp;&nbsp;&nbsp; 標準のファイルタイププラグインの設定を上書きする。<br>
<a class="Identifier" href="usr_41.html#write-plugin">|write-plugin|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;プラグインスクリプトの書き方。<br>
<a class="Identifier" href="filetype.html#plugin-details">|plugin-details|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;プラグインの使い方やプラグインが動かない場合について<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;の詳細な情報。<br>
<a class="Identifier" href="filetype.html#new-filetype">|new-filetype|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新しいファイルタイプを追加するには。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_05.html#05.5" name="05.5">*05.5*</a>&nbsp;&nbsp;ヘルプファイルの追加&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="usr_05.html#add-local-help" name="add-local-help">*add-local-help*</a>&nbsp;<a class="Constant" href="usr_05.html#matchit-install" name="matchit-install">*matchit-install*</a><br>
<br>
運が良ければ、プラグインにはヘルプファイルが添付されています。ここでは、ヘルプ<br>
ファイルのインストール方法を説明します。 インストールしておけば新しいプラグイ<br>
ンのヘルプを簡単に調べることができます。<br>
&quot;matchit.vim&quot; プラグイン (Vim の配布パッケージに入っています) を例にやってみま<br>
しょう。このプラグインは &quot;%&quot; コマンドを拡張し、対応する HTML タグや、Vim スク<br>
リプトの if/else/endif間でジャンプできるようにします。これはとても便利です。後<br>
方互換性がないので、標準では有効になっていません。<br>
このプラグインにはヘルプ &quot;matchit.txt&quot; が付属しています。最初にプラグイン本体<br>
を適切なディレクトリにコピーしましょう。今回は Vim の中から操作するので、<br>
$VIMRUNTIME が使えます。(ディレクトリがすでにある場合は、&quot;mkdir&quot; コマンドを省<br>
略してください。)<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!mkdir ~/.vim</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!mkdir ~/.vim/plugin</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!cp $VIMRUNTIME/macros/matchit.vim ~/.vim/plugin</span><br>
<br>
&quot;cp&quot; は Unix のコマンドです。MS-DOS では &quot;copy&quot; を使ってください。<br>
<br>
次に&nbsp;<a class="Type" href="options.html#'runtimepath'">'runtimepath'</a>&nbsp;のいずれかのディレクトリに &quot;doc&quot; ディレクトリを作ります。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!mkdir ~/.vim/doc</span><br>
<br>
&quot;doc&quot; ディレクトリにヘルプファイルをコピーします。&nbsp;<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:!cp $VIMRUNTIME/macros/matchit.txt ~/.vim/doc</span><br>
<br>
続いて、新しいヘルプファイルの項目にジャンプできるように仕掛けをします。<br>
<a class="Identifier" href="helphelp.html#:helptags">|:helptags|</a>コマンドを使ってタグファイルを生成してください。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:helptags ~/.vim/doc</span><br>
<br>
さて、これで次のコマンドが使えます。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:help g%</span><br>
<br>
これは上で追加したヘルプファイルの中から &quot;g%&quot; のヘルプを探すコマンドです。次の<br>
コマンドでローカルヘルプの目次を見ることができます。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:help　local-additions</span><br>
<br>
ここには、インストールしたローカルヘルプのタイトルが自動的に追加されます。ここ<br>
を見れば、どんなローカルヘルプが追加されているかわかります。ここからタグジャン<br>
プもできます。<br>
<br>
ローカルヘルプファイルの書き方については<a class="Identifier" href="usr_41.html#write-local-help">|write-local-help|</a>を参照してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_05.html#05.6" name="05.6">*05.6*</a>&nbsp;&nbsp;オプションウィンドウ<br>
<br>
何かのオプションを探しているなら、ヘルプファイル&nbsp;<a class="Identifier" href="options.html#options">|options|</a>&nbsp;から見つけることが<br>
できるでしょう。もう一つ、次のコマンドを使う方法もあります:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:options</span><br>
<br>
新しいウィンドウが開き、一行解説付きのオプションの一覧が表示されます。オプショ<br>
ンは種類別にグループ化されています。カーソルを目次の上に動かして&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;を押<br>
すとそこにジャンプできます。もう一度&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;を押すか、<span class="Special">CTRL-O</span>&nbsp;を押すと戻れま<br>
す。<br>
<br>
その場でオプションの値を設定できます。例えば、&quot;displaying text&quot; グループに移動<br>
し、カーソルを次の行まで持っていきます:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">set wrap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nowrap</span><br>
<br>
ここで&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;を押すと、表示が次のようになります:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">set nowrap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrap</span><br>
<br>
このオプションはオフになりました。<br>
<br>
この行の上には&nbsp;<a class="Type" href="options.html#'wrap'">'wrap'</a>&nbsp;オプションの簡単な説明があります。説明のところにカーソル<br>
を動かして、<span class="Special">&lt;Enter&gt;</span>&nbsp;を押すと、<a class="Type" href="options.html#'wrap'">'wrap'</a>&nbsp;オプションのヘルプにジャンプできます。<br>
<br>
数値や文字列を引数に取るオプションの場合、値を編集できます。修正後に<span class="Special">&lt;Enter&gt;</span><br>
キーを押すとそれが新しい値として設定されます。例えば、カーソルを次の行まで<br>
(<a class="Type" href="options.html#'wrap'">'wrap'</a>の少し上に) 動かしてください。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">set so=0</span><br>
<br>
&quot;$&quot; コマンドでカーソルを &quot;0&quot; の上に動かし、&quot;r5&quot; で値を 5 に変更します。<span class="Special">&lt;Enter&gt;</span><br>
を押すと、その値が設定されます。カーソルを動かしてみると、画面の端までカーソル<br>
が達する前にスクロールが始まることに気づくと思います。これは&nbsp;<a class="Type" href="options.html#'scrolloff'">'scrolloff'</a>&nbsp;オプ<br>
ションのしわざです。ウィンドウの端からのオフセットを設定し、スクロールが開始す<br>
る位置を指定しています。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<a class="Constant" href="usr_05.html#05.7" name="05.7">*05.7*</a>&nbsp;&nbsp;よく使うオプション<br>
<br>
Vim には本当に大量のオプションがあります。ほとんどのオプションは使う機会がない<br>
と思います。ここでは一部のよく使うものだけを説明します。これらのオプションには<br>
より詳しいヘルプがあることをお忘れなく。ヘルプを見るには、&quot;:help&quot; に続けてアポ<br>
ストロフィで囲んだオプション名を指定してください:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:help 'wrap'</span><br>
<br>
オプションの値がおかしくなってしまったら、初期設定に戻すことができます。初期設<br>
定に戻すのにはアンパサンド(&amp;)を使います:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword&amp;</span><br>
<br>
<br>
行の折り曲げの禁止<br>
<span class="PreProc">------------------</span><br>
<br>
長い行は、文の全体が見えるように、画面の右端で折り曲げて表示されます。しかし<br>
ウィンドウの右にはみ出した方が良い場合もあります。その場合は、左右にスクロール<br>
して長い行を表示することになります。次のコマンドで折り曲げしないようになりま<br>
す:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set nowrap</span><br>
<br>
表示されていない領域にカーソルを動かすと自動的にスクロールされます。10 文字ず<br>
つスクロールするには、次のようにします:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set sidescroll=10</span><br>
<br>
これはファイルの内容には影響しません。表示方法を変更するだけです。<br>
<br>
<br>
折り返して移動するコマンド<br>
<span class="PreProc">--------------------------</span><br>
<br>
ほとんどの移動コマンドは行頭と行末で移動を停止します。<a class="Type" href="options.html#'whichwrap'">'whichwrap'</a>&nbsp;オプションで<br>
それを変更できます。次の例では、<a class="Type" href="options.html#'whichwrap'">'whichwrap'</a>&nbsp;を初期設定に設定しています:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set whichwrap=b,s</span><br>
<br>
ここでは、<span class="Special">&lt;BS&gt;</span>&nbsp;キーで行頭から 1 つ上の行の行末へ動くことを許可しています。ま<br>
た、<span class="Special">&lt;Space&gt;</span>&nbsp;キーで行末から次の行の行頭への移動することを許可しています。<br>
<br>
カーソルキーの&nbsp;<span class="Special">&lt;Left&gt;</span>&nbsp;と&nbsp;<span class="Special">&lt;Right&gt;</span>&nbsp;もこのコマンドで折り返しを許可できます:&nbsp;<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set whichwrap=b,s,&lt;,&gt;</span><br>
<br>
この指定はノーマルモードでのみ有効です。挿入モードでも&nbsp;<span class="Special">&lt;Left&gt;</span>&nbsp;と&nbsp;<span class="Special">&lt;Right&gt;</span>&nbsp;を許<br>
可するには次のように指定します:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set whichwrap=b,s,&lt;,&gt;,[,]</span><br>
<br>
他にもいくつかフラグがあります。詳しくは&nbsp;<a class="Type" href="options.html#'whichwrap'">'whichwrap'</a>&nbsp;を参照してください。<br>
<br>
<br>
TAB を表示する<br>
<span class="PreProc">--------------</span><br>
<br>
ファイル中に Tab 文字があっても、それを視認することはできません。Tab 文字が表<br>
示されるようにしましょう:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set list</span><br>
<br>
Tab 文字が ^I と表示されます。行末には $ と表示され、通常なら気付かないよう<br>
な、行末の空白もよくわかるようになります。<br>
これの欠点はファイルに Tab 文字がたくさんあると見づらくなる点です。カラー端末<br>
か GUI を使っている場合は、空白と Tab 文字を別の文字に置き換えて強調表示するこ<br>
とができます。<a class="Type" href="options.html#'listchars'">'listchars'</a>&nbsp;オプションを使ってください:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set listchars=tab:&gt;-,trail:-</span><br>
<br>
Tab 文字は全て &quot;&gt;---&quot; と表示され、行末の空白は &quot;-&quot; と表示されます。この方が<br>
ずっとイイと思いませんか？<br>
<br>
<br>
キーワード<br>
<span class="PreProc">----------</span><br>
<br>
<a class="Type" href="options.html#'iskeyword'">'iskeyword'</a>&nbsp;オプションは単語に使える文字を定義しています:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">iskeyword=@,48-57,_,192-255</span><br>
<br>
&quot;@&quot; は「すべてのアルファベット」を表しています。&quot;48-57&quot; は ASCII コード の 48<br>
から 57 までの文字、つまり &quot;0&quot; から &quot;9&quot; までの数字を表しています。&quot;192-255&quot; は<br>
印字可能なラテン文字です。<br>
例えば、&quot;upper-case&quot; を１つの単語と扱って欲しい場合は、&quot;-&quot; をキーワードに追加<br>
します。次のように設定してください:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword+=-</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">iskeyword=@,48-57,_,192-255,-</span><br>
<br>
新しい設定をみると、&quot;-&quot; の直前に &quot;,&quot; が自動的に追加されています。<br>
キーワードから文字を削除するには &quot;-=&quot; を使います。アンダースコアを削除するには<br>
次のようにします:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword-=_</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set iskeyword</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="PreProc">iskeyword=@,48-57,192-255,-</span><br>
<br>
&quot;_&quot; を削除すると &quot;,&quot; も自動的に削除されました。<br>
<br>
<br>
メッセージ行<br>
<span class="PreProc">------------</span><br>
<br>
初期設定では、最下段の一行がメッセージの表示に使われます。メッセージが長いとき<br>
は、メッセージを切り詰めて一部だけ表示するか、メッセージをスクロールして表示<br>
し、最後に&nbsp;<span class="Special">&lt;Enter&gt;</span>&nbsp;を押してもらうかのどちらかです。<br>
メッセージの表示に使う行数は&nbsp;<a class="Type" href="options.html#'cmdheight'">'cmdheight'</a>&nbsp;オプションで設定できます:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set cmdheight=3</span><br>
<br>
編集画面が狭くなってしまうので、ほどほどの値を設定してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
<br>
次章:&nbsp;<a class="Identifier" href="usr_06.html">|usr_06.txt|</a>&nbsp;&nbsp;構文強調表示<br>
<br>
Copyright: see&nbsp;<a class="Identifier" href="usr_01.html#manual-copyright">|manual-copyright|</a>&nbsp;&nbsp;vim&#0058;tw=78:ts=8:ft=help:norl:<br>
