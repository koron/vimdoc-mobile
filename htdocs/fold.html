---
layout: vimdoc
helpname: 'fold'
---
<a class="Constant" href="fold.html" name="fold.txt">*fold.txt*</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 7.3.</span>&nbsp;&nbsp;Last change: 2010 May 13<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VIMリファレンスマニュアル&nbsp;&nbsp;&nbsp;&nbsp;by Bram Moolenaar<br>
<br>
<br>
折畳(Folding)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#Folding" name="Folding">*Folding*</a>&nbsp;<a class="Constant" href="fold.html#folding" name="folding">*folding*</a>&nbsp;<a class="Constant" href="fold.html#folds" name="folds">*folds*</a><br>
<br>
ユーザマニュアルの28章に折畳についての紹介がされている。<a class="Identifier" href="usr_28.html">|usr_28.txt|</a><br>
<br>
1. 折畳方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-methods">|fold-methods|</a><br>
2. 折畳コマンド&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-commands">|fold-commands|</a><br>
3. 折畳オプション&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-options">|fold-options|</a><br>
4. 折畳の振舞&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-behavior">|fold-behavior|</a><br>
<br>
<span class="Special">{Vi には折畳は無い}</span><br>
{<a class="Identifier" href="various.html#+folding">|+folding|</a>&nbsp;機能無しでコンパイルした場合には利用できない}<br>
<br>
<span class="PreProc">==============================================================================</span><br>
1. 折畳方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-methods" name="fold-methods">*fold-methods*</a><br>
<br>
折畳を行なう方法は<a class="Type" href="options.html#'foldmethod'">'foldmethod'</a>オプションで設定できる。<br>
<br>
<a class="Type" href="options.html#'foldmethod'">'foldmethod'</a>を&quot;manual&quot;以外の値に設定すると、存在している折畳は総て削除され新た<br>
な折畳が作成される。&quot;manual&quot;に切換えた時には既存の折畳は削除されない。これを利<br>
用すればまず自動的に折畳を定義し、それから手動で変更することが可能である。<br>
<br>
折畳方法は6つの中から選択できる:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manual&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;手動で折畳を定義する<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;インデントの数を折畳のレベル(深さ)とする<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳を定義する式を指定する<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;syntax&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;構文強調により折畳を定義する<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;変更されていないテキストを折畳対象とする<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;marker&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;テキスト中の印で折畳を定義する<br>
<br>
<br>
手動(MANUAL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-manual" name="fold-manual">*fold-manual*</a><br>
<br>
折畳領域を定義するためにコマンドを手動で利用する。これはテキスト中の折畳を行な<br>
う箇所をスクリプトにより解析するのに使うこともできる。<br>
<br>
折畳のレベルは折畳の入れ子の深さとなる。ある行範囲の折畳レベルを増やすには、折<br>
畳がある同じ範囲に対して再び折畳を設定する。<br>
<br>
手動折畳はファイルを放棄すると失われる。折畳を保存するには<a class="Identifier" href="starting.html#:mkview">|:mkview|</a>コマンドを<br>
使用する。後に復元するには<a class="Identifier" href="starting.html#:loadview">|:loadview|</a>を使用する。<br>
<br>
<br>
インデント(INDENT)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-indent" name="fold-indent">*fold-indent*</a><br>
<br>
折畳は各行のインデントにより自動的に定義される。<br>
<br>
折畳レベルは各行のインデント量を、<a class="Type" href="options.html#'shiftwidth'">'shiftwidth'</a>で割る(端数切捨て)ことで計算され<br>
る。同じかより高い折畳レベルを持った一続きの範囲は1つの折畳を形成し、より高い<br>
レベルを持った範囲はその中で入れ子の折畳となる。<br>
<br>
折畳の入れ子は<a class="Type" href="options.html#'foldnestmax'">'foldnestmax'</a>によって制限される。<br>
<br>
ある行ではインデントを無視して直ぐ上か下の行のうち、低いほうの折畳レベルが使用<br>
される。無視されるのは完全な空行か、空白文字だけからなる行、および<a class="Type" href="options.html#'foldignore'">'foldignore'</a><br>
の文字で始まる行である。<a class="Type" href="options.html#'foldignore'">'foldignore'</a>の文字の前に空白文字があっても無視される。<br>
Cではプリプロセッサ行を無視するために&quot;#&quot;を使用する。<br>
<br>
他の方法で無視する行を定義するには、<span class="MissingTag">'expr'</span>の方法を使用する。<a class="Type" href="options.html#'foldexpr'">'foldexpr'</a>の中で、<br>
ある行のインデントを取得するのに、関数<a class="Identifier" href="eval.html#indent()">|indent()|</a>を使うことができる。<br>
<br>
<br>
式(EXPR)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-expr" name="fold-expr">*fold-expr*</a><br>
<br>
折畳は&quot;indent&quot;方式のように、折畳レベルによって自動的に定義される。<a class="Type" href="options.html#'foldexpr'">'foldexpr'</a>オ<br>
プションの値は、各行についてこの折畳レベルを計算するためにスクリプトとして実行<br>
される。例:<br>
タブで始まる一連の行範囲を1つの折畳にまとめる:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set foldexpr=getline(v:lnum)[0]==\&quot;\\t\&quot;</span><br>
折畳レベルを計算するのにVimスクリプトの関数を呼び出す:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set foldexpr=MyFoldLevel(v:lnum)</span><br>
空行で仕切られた「段落」を折畳とする:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:set foldexpr=getline(v:lnum)=~'^\\s*$'&amp;&amp;getline(v:lnum+1)=~'\\S'?'&lt;1':1</span><br>
同じ事(「段落」を折畳に)をする別の表現:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:set foldexpr=getline(v:lnum-1)=~'^\\s*$'&amp;&amp;getline(v:lnum)=~'\\S'?'&gt;1':1</span><br>
<br>
バックスラッシュ(日本では \ 記号)が&quot;:set&quot;の流儀で、通常とは異なるキャラクタ(空<br>
白文字、バックスラッシュ、ダブルクオート、その他、詳細は<a class="Identifier" href="options.html#option-backslash">|option-backslash|</a>参<br>
照)をエスケープしていることに注意。<br>
<br>
式が評価される際の前提条件は以下の通り:<br>
- その行について現在のバッファとウィンドウが常に存在している。<br>
- 変数&quot;v:lnum&quot;には評価対象となる行番号が設定されている。<br>
- 式の結果(戻り値)は以下の形式で折畳レベルを示す:<br>
&nbsp;&nbsp;<span class="PreProc">値&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;意味</span><br>
&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 対象行は折畳に含まれない<br>
&nbsp;&nbsp;1, 2, ..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;対象行はこのレベルの折畳に含まれる<br>
&nbsp;&nbsp;-1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳レベルを未定義とし、対象行の直前か直後の行のうち低<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;い方を、対象行のレベルとする。<br>
&nbsp;&nbsp;&quot;=&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 直前の行と同じレベルを使用する<br>
&nbsp;&nbsp;&quot;a1&quot;, &quot;a2&quot;, ..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;直前の行のレベルを+1, +2して設定する<br>
&nbsp;&nbsp;&quot;s1&quot;, &quot;s2&quot;, ..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;直前の行のレベルを-1, -2して設定する<br>
&nbsp;&nbsp;&quot;&lt;1&quot;, &quot;&lt;2&quot;, ..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;指定したレベルの折畳を対象行で終了する<br>
&nbsp;&nbsp;&quot;&gt;1&quot;, &quot;&gt;2&quot;, ..&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;指定したレベルの折畳を対象行から開始する<br>
<br>
折畳は直前の行の折畳レベルより高い(低い)行から開始(終了)されるので、折畳の開始<br>
(終了)マーク&quot;&gt;1&quot; (&quot;&lt;1&quot;) は明示的に指定する必要は無い。<br>
<br>
式に副作用があってはならない。バッファ内のテキストや、カーソルの位置や、検索パ<br>
ターン、オプションその他。どれひとつ変更してはならない。<br>
ただし、注意深く行えば、変更してもそれを復元しておけばよい。<br>
<br>
式にエラーがあるか、結果が認識できない時には、何のエラーメッセージも表示せずに<br>
折畳レベルは0に設定される。<a class="Type" href="options.html#'debug'">'debug'</a>オプションに&quot;msg&quot;を設定すれば、エラーメッ<br>
セージが表示されるようになるので、デバッグに利用できる。<br>
<br>
<span class="Todo">NOTE</span>: 各行について式評価が実行されるので、この折畳方式は非常に動作が遅くなる可<br>
能性がある!<br>
<br>
&quot;=&quot;, &quot;a&quot;, そして&quot;s&quot;は極力避けるようにする。なぜならVimはそれらが使われると、折<br>
畳レベルが定義された行が見つかるまで戻って、幾度も検索を行なわなければならない<br>
からだ。これは動作が遅くなることがある。<br>
<br>
フォールドレベルを調べるには<a class="Identifier" href="eval.html#foldlevel()">|foldlevel()|</a>を使うのが便利です。レベルがわからな<br>
いときは-1を返すことに注意してください。フォールドがその行で終わっているときに<br>
は行頭のレベルを返します。<br>
<br>
折畳が適切に更新されない場合があります。その場合は&nbsp;<a class="Identifier" href="fold.html#zx">|zx|</a>&nbsp;か&nbsp;<a class="Identifier" href="fold.html#zX">|zX|</a>&nbsp;を使って強制的<br>
に更新してください。<br>
<br>
<br>
構文(SYNTAX)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-syntax" name="fold-syntax">*fold-syntax*</a><br>
<br>
折畳が&quot;fold&quot;引数を持つ構文要素によって定義される。&nbsp;<a class="Identifier" href="syntax.html#:syn-fold">|:syn-fold|</a><br>
<br>
折畳レベルは入れ子によって定義される。入れ子の深さは<a class="Type" href="options.html#'foldnestmax'">'foldnestmax'</a>によって制限<br>
される。<br>
<br>
シンタックスの同期の設定に注意してください。これが正しく設定されていないと<br>
フォールドが間違ったハイライトで表示されます。これは特に複数行にマッチするシン<br>
タックスで問題になります。そのようなときには次のような力技があります:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:syn sync fromstart</span><br>
<br>
<br>
差分(DIFF)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-diff" name="fold-diff">*fold-diff*</a><br>
<br>
テキストの変更された箇所とその近辺以外が自動的に折畳として定義される。<br>
<br>
この方法は現在のウィンドウに対して<a class="Type" href="options.html#'diff'">'diff'</a>オプションが設定されている時にだけ正し<br>
く働き、変更点が表示される。そうでない場合バッファ全体が1つの大きな折畳となる。<br>
<br>
コンテキスト(の行数)を指定するのに<a class="Type" href="options.html#'diffopt'">'diffopt'</a>を使うことができる。これにより変更<br>
点の近辺の折畳に含まない行数を指定できる。下の例では8行表示するように設定して<br>
いる:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set diffopt=filler,context:8</span><br>
省略した場合には6行が表示される。<br>
<br>
<a class="Type" href="options.html#'scrollbind'">'scrollbind'</a>が設定されているとき、Vimは他のウインドウと見た目が同じになるよう<br>
にフォールドを開いた状態に保とうとします。<br>
<br>
印(MARKER)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-marker" name="fold-marker">*fold-marker*</a><br>
<br>
テキスト中の印により折畳の開始と終了地点を指定する。これにより明確に折畳を設定<br>
することができる。また誤った行を含むことなく、折畳を削除・設定できる。通常<br>
<a class="Type" href="options.html#'foldtext'">'foldtext'</a>オプションは折畳の行に表示されるテキストとして、印の直前のテキスト設<br>
定する。これにより折畳に名前を設定することが可能になる。<br>
<br>
印には折畳レベルを含むことができ、また開始と終了で対になる文字を使うこともでき<br>
る。必ずしも終了の印を加える必要はなく、また対がない印が無い場合の問題も避けら<br>
れるので、レベルを含んだほうがより簡単である。例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* グローバル変数 {{ "{{{" }}1 */</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int varA, varB;</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* 関数 {{ "{{{" }}1 */</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* funcA() {{ "{{{" }}2 */</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void funcA() {}</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* funcB() {{ "{{{" }}2 */</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void funcB() {}</span><br>
<br>
折畳は印&quot;{{ "{{{" }}&quot;で開始する。印の後ろの番号は折畳レベルを示す。現在の折畳レベルと<br>
異なるレベルが印によって与えられた時に何が起こるかは、そのレベルの差に依存す<br>
る:<br>
1. 同じ折畳レベルの印が与えられた時には、前の折畳は終了し同じレベルの新たな折<br>
&nbsp;&nbsp; 畳が開始する。<br>
2. 高い折畳レベルの印を見つけた時には、入れ子の折畳が開始する。<br>
3. 低い折畳レベルの印を見つけた時には、指定されたレベル以上の全部の折畳を終了<br>
&nbsp;&nbsp; し、指定されたレベルで新たな折畳が開始する。<br>
<br>
番号は折畳レベルを示す。0を使うことはできない(レベル0の印は無視される)。特定の<br>
レベルの折畳を終了させるため &quot;}}}&quot; 数字を付けて使うことができる。その印の直後<br>
の行の折畳レベルは示されたレベルよりも1つだけ低くなる。Vimは指定されたレベルに<br>
マッチする印を検索はしないことに注意(計算に時間がかかりすぎてしまうので)。<br>
例:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ "{{{" }}1</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからレベル1の折畳</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ "{{{" }}3</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからレベル3の折畳</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}}3</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからレベル2の折畳</span><br>
<br>
折畳を定義するのに対になる&quot;{{ "{{{" }}&quot;と&quot;}}}&quot;を使用することもできる。折畳レベルは<br>
&quot;{{ "{{{" }}&quot;1つにつき1ずつ増加し、&quot;}}}&quot;1つにつき1ずつ減少する。印同士の対応関係を維持<br>
するように気をつけること!。例:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ "{{{" }}</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからレベル1の折畳</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ "{{{" }}</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからレベル2の折畳</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}}</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからレベル1の折畳</span><br>
<br>
番号付きの印と番号無しの印を混ぜて使用することもできる。大きな折畳には番号付き<br>
の印を使用し、関数中の小さな折畳などには番号無しの印を使うと便利だろう。一例を<br>
挙げれば、ファイルの &quot;構造体定義&quot; や &quot;ローカル変数&quot; それから &quot;関数定義&quot; のよう<br>
な部分にはレベル1(番号付き)の折畳を使用する。そして一つ一つの定義や関数実装に<br>
はレベル2の折畳を使用し、関数内部(例えばあるブロックなど)には番号無しの印を使<br>
用する。こうしておけば関数の中で折畳を分割するような変更を行なう時に、印にレベ<br>
ルを付け直す必要はなくなる。<br>
<br>
印は<a class="Type" href="options.html#'foldmarker'">'foldmarker'</a>オプションにより変更できる。Vimユーザ間でファイルを交換できる<br>
ようにするためには、このオプションのデフォルトである &quot;{{ "{{" }}<span class="Special">{,}</span>}}&quot; は変更しないこ<br>
とが推奨される。ファイルによってそれがどうしても必要な時(例えば別のエディタで<br>
作成した折畳を示す異なる印を含んでいる時や、ファイル内容の制約によりデフォルト<br>
の印が問題を起こすため、それを使うことができない場合)にだけ変えるように。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-create-marker" name="fold-create-marker">*fold-create-marker*</a><br>
印による折畳を作成するのに &quot;zf&quot; コマンドを使用することができる。Vimがユーザに<br>
代わって印を挿入する。Vimは<a class="Type" href="options.html#'foldmarker'">'foldmarker'</a>で指定された開始の印と終了の印を追加す<br>
る。印は行末に追加される。<a class="Type" href="options.html#'commentstring'">'commentstring'</a>が空でなければそれが使用される。<br>
これは次のような時には正しく働かない:<br>
- 既に番号付き折畳が含まれている。Vimはそれをどのように扱えば良いか知らない。<br>
- 番号付き折畳の近くで、それらの印が邪魔になる場合。<br>
- 行がコメントの中で、<a class="Type" href="options.html#'commentstring'">'commentstring'</a>が空ではなく、かつ入れ子コメントを使用で<br>
&nbsp;&nbsp;きない場合。例えばC言語: /* {{ "{{{" }} */ を既に存在するコメントを消さずにその中に<br>
&nbsp;&nbsp;追加するようなこと。コメントの直前か直後に印を設定するか、もしくは手動で印を<br>
&nbsp;&nbsp;追加する必要がある。<br>
一般的に、既に番号付き折畳が存在する場合には、Vimに印を作成させるのは良いアイ<br>
デアではない。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-delete-marker" name="fold-delete-marker">*fold-delete-marker*</a><br>
印による折畳を削除するのに &quot;zd&quot; コマンドを使用することができる。Vimがユーザに<br>
代わって印を削除する。Vimは<a class="Type" href="options.html#'foldmarker'">'foldmarker'</a>で指定された開始の印と終了の印を検索す<br>
る。印の周りにある<a class="Type" href="options.html#'commentstring'">'commentstring'</a>に適合するテキストは可能な限り削除される。<br>
これは次のような時には正しく働かない:<br>
- ある行に印が1つ以上含まれていて、そのうち少なくとも1つがレベルを指定している<br>
&nbsp;&nbsp;場合。折畳を削除することで期待される効果どうりになるかどうかはチェックされる<br>
&nbsp;&nbsp;ことなく、単に初めの折畳が1つ削除される。<br>
- 番号付き印で、複数の折畳を同時に開始したり終了するために使用されている場合。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
2. 折畳コマンド&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-commands" name="fold-commands">*fold-commands*</a>&nbsp;<a class="Constant" href="fold.html#E490" name="E490">*E490*</a><br>
<br>
全ての折畳コマンドは &quot;z&quot; で始まっている。ヒント: &quot;z&quot; は紙片を折った様子を横から<br>
みた姿に見える。<br>
<br>
<br>
<span class="PreProc">折畳の作成と削除</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zf" name="zf">*zf*</a>&nbsp;<a class="Constant" href="fold.html#E350" name="E350">*E350*</a><br>
zf<span class="Special">{motion}</span>&nbsp;&nbsp;or<br>
<span class="Special">{Visual}</span>zf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳を作成する操作。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldmethod'">'foldmethod'</a>が&quot;manual&quot; か &quot;marker&quot;の時だけ動作する。&quot;manual&quot;の<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;時には新しい折畳は閉じられる。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>がセット(有効化)される。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-create-marker">|fold-create-marker|</a>も参照。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zF" name="zF">*zF*</a><br>
zF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">[count]</span>行を折畳として作成する。&quot;zf&quot;と同じように動作する。<br>
<br>
:<span class="Special">{range}</span>fo[ld]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#:fold" name=":fold">*:fold*</a>&nbsp;<a class="Constant" href="fold.html#:fo" name=":fo">*:fo*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{range}</span>で示された範囲を折畳にする。&quot;zf&quot;と同様に動作する。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zd" name="zd">*zd*</a>&nbsp;<a class="Constant" href="fold.html#E351" name="E351">*E351*</a><br>
zd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの位置にある折畳を1つ削除する。カーソルが折畳になって<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;いる行にある場合には、その折畳が削除される。入れ子になった折畳<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;は1レベル分が削除される。ビジュアルモードでは選択された範囲の<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全ての折畳(partially)が削除される。注意: これは期待したよりも<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;余計に折畳を削除し易く、またアンドゥもできないので注意が必要。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldmethod'">'foldmethod'</a>が&quot;manual&quot; か &quot;marker&quot;の時だけ動作する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-delete-marker">|fold-delete-marker|</a>も参照。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zD" name="zD">*zD*</a><br>
zD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの位置の折畳を再帰的に削除する。ビジュアルモードでは、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;選択された範囲内の入れ子も含め全ての折畳(partially)が削除され<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;る。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldmethod'">'foldmethod'</a>が&quot;manual&quot; か &quot;marker&quot;の時だけ動作する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-delete-marker">|fold-delete-marker|</a>も参照。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zE" name="zE">*zE*</a>&nbsp;<a class="Constant" href="fold.html#E352" name="E352">*E352*</a><br>
zE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ウィンドウにある全ての折畳を削除する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldmethod'">'foldmethod'</a>が&quot;manual&quot; か &quot;marker&quot;の時だけ動作する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="fold.html#fold-delete-marker">|fold-delete-marker|</a>も参照。<br>
<br>
<br>
<span class="PreProc">折畳を開く・閉じる</span><br>
<br>
<a class="Type" href="options.html#'foldminlines'">'foldminlines'</a>よりも少ない行数の折畳は常に開いたように表示される。従って以下の<br>
コマンドは小さな折畳に関しては異なった働きを持つ。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zo" name="zo">*zo*</a><br>
zo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下の折畳を一段階開く。カウントが与えられた場合には、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;複数の深さの折畳が開かれる。ビジュアルモードでは、選択された範<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;囲にある全ての折畳が1レベル開かれる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zO" name="zO">*zO*</a><br>
zO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下の折畳を再帰的に全て開く。カーソルのある行を含まな<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;いフォールドは変更されない。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ビジュアルモードでは、選択された範囲の全ての折畳が、部分的に選<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;択されていただけでも全て完全に開かれる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zc" name="zc">*zc*</a><br>
zc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下の折畳を一段階閉じる。カウントが与えられた場合に<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;は、複数の深さの折畳が閉じられる。ビジュアルモードでは、選択さ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;れた範囲にある全ての折畳が1レベル閉じられる。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>&nbsp;がセット(有効化)される。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zC" name="zC">*zC*</a><br>
zC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下の折畳を再帰的に全て閉じる。カーソルのある行を含ま<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ないフォールドは変更されない。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ビジュアルモードでは、選択された範囲の全ての折畳が、部分的に選<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;択されていただけでも全て完全に閉じられる。<a class="Type" href="options.html#'foldenable'">'foldenable'</a>がセット<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(有効化)される。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#za" name="za">*za*</a><br>
za&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳が閉じていた場合: それを開く。折畳が入れ子になっている時に<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;は、&quot;za&quot;を何度も使う必要がある。カウントが与えられた場合には、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;複数の閉じられた折畳が開かれる。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳が開いていた場合: それを閉じ<a class="Type" href="options.html#'foldenable'">'foldenable'</a>をセットする。繰り<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;返し使っても閉じた折畳が開くだけだから、これは1レベル開くだけ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;である。カウントが与えられた場合には、複数の折畳が閉じられる<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(これは&quot;za&quot;を複数回繰り返した場合の動作と同じではない)。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zA" name="zA">*zA*</a><br>
zA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳が閉じていた場合: 再帰的に開く。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳が開いていた場合: 再帰的に閉じ<a class="Type" href="options.html#'foldenable'">'foldenable'</a>をセットする。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zv" name="zv">*zv*</a><br>
zv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソル行を表示する: カーソルのある行がちょうど表示されるレベ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ルまで折畳を開く。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zx" name="zx">*zx*</a><br>
zx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳を更新する: 手動で行なった折畳の開閉操作をアンドゥする:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>を再適用し、&quot;zv&quot;を行なう: カーソル行を表示する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳の計算を強制するのにも使えます。これは&nbsp;<a class="Type" href="options.html#'foldexpr'">'foldexpr'</a>&nbsp;を使って<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;いてバッファが変更されたにも関わらず折畳が適切に更新されないよ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;うな場合に便利です。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zX" name="zX">*zX*</a><br>
zX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;手動で行なった折畳の開閉操作をアンドゥする:&nbsp;<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>を再適<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳の計算を強制するのにも使えます (<a class="Identifier" href="fold.html#zx">|zx|</a>&nbsp;と同様)。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zm" name="zm">*zm*</a><br>
zm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳をより閉じる:&nbsp;<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>を1減少させる。<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>が既に0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ならば何も起こらない。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>がセット(有効化)される。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zM" name="zM">*zM*</a><br>
zM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全ての折畳を閉じる:&nbsp;<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>に0を設定する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>がセット(有効化)される。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zr" name="zr">*zr*</a><br>
zr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳をより開く:&nbsp;<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>を1増加させる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zR" name="zR">*zR*</a><br>
zR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;全ての折畳を開く:&nbsp;<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>に最大の折畳レベルを設定する。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#:foldo" name=":foldo">*:foldo*</a>&nbsp;<a class="Constant" href="fold.html#:foldopen" name=":foldopen">*:foldopen*</a><br>
:<span class="Special">{range}</span>foldo[pen][!]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{range}</span>の範囲の折畳を開く。[!]が付け加わると全ての折畳が開かれ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;る。<span class="Special">{range}</span>範囲内の全てのテキストを見るのに役立つ。[!]が無い時<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;は1レベル分の折畳が開かれる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#:foldc" name=":foldc">*:foldc*</a>&nbsp;<a class="Constant" href="fold.html#:foldclose" name=":foldclose">*:foldclose*</a><br>
:<span class="Special">{range}</span>foldc[lose][!]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">{range}</span>の範囲の折畳を閉じる。[!]が付け加わると全ての折畳が閉じ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;られる。<span class="Special">{range}</span>範囲内の全てのテキストを隠すのに役立つ。[!]が無<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;い時は1レベル分の折畳が閉じられる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zn" name="zn">*zn*</a><br>
zn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fold none: reset&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>.&nbsp;&nbsp;All folds will be open.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳しない:&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>をリセットする。全ての折畳が開かれる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zN" name="zN">*zN*</a><br>
zN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;折畳する:&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>をセットする。全ての折畳が<a class="Type" href="options.html#'foldenable'">'foldenable'</a>が<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;リセットされる以前と同様になる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zi" name="zi">*zi*</a><br>
zi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'foldenable'">'foldenable'</a>を反転する。<br>
<br>
<br>
<span class="PreProc">折畳を超えて移動する</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#[z" name="[z">*[z*</a><br>
[z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;現在の開いている折畳の先頭へ移動する。既に先頭にいるのならば、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;それを含む外側の折畳の先頭へ移動する。外側の折畳が無い場合は、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コマンドは失敗する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カウントが与えられた場合には、<span class="Special">[count]</span>回繰り返される。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#]z" name="]z">*]z*</a><br>
]z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;現在の開いている折畳の末尾へ移動する。既に末尾にいるのならば、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;それを含む外側の折畳の末尾へ移動する。外側の折畳が無い場合は、<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コマンドは失敗する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カウントが与えられた場合には、<span class="Special">[count]</span>回繰り返される。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zj" name="zj">*zj*</a><br>
zj&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルより下方の折畳へ移動する。閉じられた折畳が1つの折畳と<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;して数えられる。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カウントが与えられた場合には、<span class="Special">[count]</span>回繰り返される。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;このコマンドは<a class="Identifier" href="motion.html#operator">|operator|</a>のように使うことができる。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#zk" name="zk">*zk*</a><br>
zk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルより上方の折畳へ移動する。閉じられた折畳が1つの折畳と<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;して数えられる。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カウントが与えられた場合には、<span class="Special">[count]</span>回繰り返される。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;このコマンドは<a class="Identifier" href="motion.html#operator">|operator|</a>のように使うことができる。<br>
<br>
<br>
<span class="PreProc">折畳に対してコマンドを実行する</span><br>
<br>
:<span class="Special">[range]</span>foldd[oopen]&nbsp;<span class="Special">{cmd}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#:foldd" name=":foldd">*:foldd*</a>&nbsp;<a class="Constant" href="fold.html#:folddoopen" name=":folddoopen">*:folddoopen*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;閉じた折畳の中以外の全ての行に対して<span class="Special">{cmd}</span>を実行する。<span class="Special">[range]</span>が<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;与えられた時は、その範囲だけが対象となる。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コマンドが各行に対して実行される時にはカーソルはその対象となる<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行に置かれている。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;これは&quot;:global&quot;コマンドのように動作する: まず閉じられた折畳に<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;入っていない全ての行がマークされる。それからマークされた全ての<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行に対して<span class="Special">{cmd}</span>が実行される。だから<span class="Special">{cmd}</span>が折畳に対して変更を加<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;えても、コマンドの実行には影響が無い(もちろん行が消された時は<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;除く)。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:folddoopen s/end/loop_end/ge</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;e&quot;フラグには&quot;end&quot;がマッチしなかった時にエラーメッセージが表示<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;させない効果がある。<br>
<br>
:<span class="Special">[range]</span>folddoc[losed]&nbsp;<span class="Special">{cmd}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#:folddoc" name=":folddoc">*:folddoc*</a>&nbsp;<a class="Constant" href="fold.html#:folddoclosed" name=":folddoclosed">*:folddoclosed*</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;閉じた折畳の中にある全ての行に対して<span class="Special">{cmd}</span>を実行する。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;その他は&quot;:folddoopen&quot;と同じ。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
3. 折畳オプション&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-options" name="fold-options">*fold-options*</a><br>
<br>
色&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-colors" name="fold-colors">*fold-colors*</a><br>
<br>
閉じられた折畳の色はFoldedグループによって設定される<a class="Identifier" href="syntax.html#hl-Folded">|hl-Folded|</a>。折畳表示カラ<br>
ムの色はFoldColumnグループによって設定される<a class="Identifier" href="syntax.html#hl-FoldColumn">|hl-FoldColumn|</a>。<br>
色の設定例:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:highlight Folded guibg=grey guifg=blue</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:highlight FoldColumn guibg=darkgrey guifg=white</span><br>
<br>
<br>
折畳レベル&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-foldlevel" name="fold-foldlevel">*fold-foldlevel*</a><br>
<br>
<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>は数を設定するオプションである: 大きな数を設定するとより多くの折畳<br>
が開かれる。<br>
<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>が0の時には、全ての折畳が閉じられる。<br>
<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>が正の時には、幾つかの折畳が閉じられる。<br>
<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>が非常に大きい時は、全ての折畳が閉じられる。<br>
<a class="Type" href="options.html#'foldlevel'">'foldlevel'</a>は変更された時に適用される。その後に手動で折畳を開いたり閉じたりで<br>
きる。<br>
値を増やした時には、新しいレベルの値以上の折畳が開かれる。手動で開かれていた折<br>
畳は閉じられない。<br>
値を減らした時には、新しいレベルの値以上の折畳が閉じられる。手動で閉じられてい<br>
た折畳は開かれない。<br>
<br>
<br>
折畳テキスト&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-foldtext" name="fold-foldtext">*fold-foldtext*</a><br>
<br>
<a class="Type" href="options.html#'foldtext'">'foldtext'</a>は式を指定する文字列オプションである。この式は閉じられた折畳を示すテ<br>
キストを得るために評価実行される。例:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:set foldtext=v:folddashes.substitute(getline(v:foldstart),'/\\*\\\|\\*/\\\|{{ "{{{" }}\\d\\=','','g')</span><br>
<br>
これは折畳の最初の1行を、&quot;/*&quot; と &quot;*/&quot; を追加し&quot;{{ "{{{" }}&quot;を削除して表示する。多めの<br>
バックスラッシュ(\ 記号)はある文字が&quot;:set&quot;コマンドに解釈されてしまうのを避ける<br>
ために使用されている。これは以下のように関数を定義するとより簡単になる:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:set foldtext=MyFoldText()</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:function MyFoldText()</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;let line = getline(v:foldstart)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;let sub = substitute(line, '/\*\|\*/\|{{ "{{{" }}\d\=', '', 'g')</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;return v:folddashes . sub</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;:endfunction</span><br>
<br>
<a class="Type" href="options.html#'foldtext'">'foldtext'</a>は<a class="Identifier" href="eval.html#sandbox">|sandbox|</a>環境下で実行評価される。現在のウィンドウはそのラインの属<br>
するウィンドウへ設定される。エラーは無視される。<br>
<br>
省略値は<a class="Identifier" href="eval.html#foldtext()">|foldtext()|</a>である。これはほとんどのタイプの折畳に対して妥当なテキスト<br>
を返す。それが気に入らないのならば、独自の式を<a class="Type" href="options.html#'foldtext'">'foldtext'</a>に設定することができ<br>
る。その式中では以下の特別なVim変数を使用することができる:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v:foldstart&nbsp;&nbsp;&nbsp;&nbsp; 折畳の先頭の行番号<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v:foldend&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 折畳の末尾の行番号<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v:folddashes&nbsp;&nbsp;&nbsp;&nbsp;折畳レベルを表現したダッシュ(-)記号を含む文字列。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v:foldlevel&nbsp;&nbsp;&nbsp;&nbsp; 折畳のレベル<br>
<br>
結果の文字列中のタブ文字は1つの空白文字に置き換えられ、表示不可能な文字は表示<br>
可能な文字に作り変えられる。<br>
<br>
結果の文字列はウィンドウに合うように切り捨てられ、折り返されることはない。<br>
テキストの後ろに余白があれば、<a class="Type" href="options.html#'fillchars'">'fillchars'</a>で指定された文字で充たされる。<br>
<br>
&quot;:set&quot;コマンドが解釈してしまう文字: 空白、バックスラッシュ(\ 記号)そしてダブル<br>
クォート を使う場合にはバックスラッシュが必要である。&nbsp;<a class="Identifier" href="options.html#option-backslash">|option-backslash|</a><br>
<br>
<br>
折畳表示カラム&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-foldcolumn" name="fold-foldcolumn">*fold-foldcolumn*</a><br>
<br>
<a class="Type" href="options.html#'foldcolumn'">'foldcolumn'</a>は、ウィンドウの端に確保される折畳を示すカラムの幅を指定する数。0<br>
ならば、折畳表示カラムは確保されない。通常は4から5が一般的。使い物になる最小値<br>
は2であるが、1にしてもいくらかの情報を提供する。最大値は12。<br>
<br>
折畳表示カラムには、開いた折畳の先頭に'-' が続いて '|'が表示される。このカラム<br>
は開いた折畳が終了した位置で終了する。入れ子になった折畳では、それを含む折畳の<br>
1つ左側に表示される。<br>
<br>
閉じた折畳は'+'で表示される。<br>
<br>
全ての折畳を表示できないほど折畳表示カラムが狭いときには、入れ子のレベルが数字<br>
で表示される。<br>
<br>
折畳表示カラムをクリックすることで、マウスにより折畳を開閉することができる:<br>
- 閉じた折畳を開くにはその行の'+'をクリックする。<br>
- 開いた折畳を閉じるにはそれ以外の非空白文字をクリックする。<br>
<br>
<br>
その他のオプション<br>
<br>
<a class="Type" href="options.html#'foldenable'">'foldenable'</a>&nbsp;&nbsp;<a class="Type" href="options.html#'fen'">'fen'</a>:&nbsp;&nbsp;&nbsp;&nbsp;無効に設定すると全ての折畳が開く。<br>
<a class="Type" href="options.html#'foldexpr'">'foldexpr'</a>&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'fde'">'fde'</a>:&nbsp;&nbsp;&nbsp;&nbsp;式(&quot;expr')による折畳で使用される。<br>
<a class="Type" href="options.html#'foldignore'">'foldignore'</a>&nbsp;&nbsp;<a class="Type" href="options.html#'fdi'">'fdi'</a>:&nbsp;&nbsp;&nbsp;&nbsp;インデントによる折畳で使用される。<br>
<a class="Type" href="options.html#'foldmarker'">'foldmarker'</a>&nbsp;&nbsp;<a class="Type" href="options.html#'fmr'">'fmr'</a>:&nbsp;&nbsp;&nbsp;&nbsp;印による折畳で使用される印を定義する。<br>
<a class="Type" href="options.html#'foldmethod'">'foldmethod'</a>&nbsp;&nbsp;<a class="Type" href="options.html#'fdm'">'fdm'</a>:&nbsp;&nbsp;&nbsp;&nbsp;現在の折畳方法の名称。<br>
<a class="Type" href="options.html#'foldminlines'">'foldminlines'</a>&nbsp;<a class="Type" href="options.html#'fml'">'fml'</a>:&nbsp;&nbsp; 閉じた状態で表示されるべき折畳の、スクリーン上での最小<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行数<br>
<a class="Type" href="options.html#'foldnestmax'">'foldnestmax'</a>&nbsp;<a class="Type" href="options.html#'fdn'">'fdn'</a>:&nbsp;&nbsp;&nbsp;&nbsp;インデント及び構文折畳での最大入れ子数<br>
<a class="Type" href="options.html#'foldopen'">'foldopen'</a>&nbsp;&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'fdo'">'fdo'</a>:&nbsp;&nbsp;&nbsp;&nbsp;閉じている折畳を開くコマンドの種類<br>
<a class="Type" href="options.html#'foldclose'">'foldclose'</a>&nbsp;&nbsp;&nbsp;<a class="Type" href="options.html#'fcl'">'fcl'</a>:&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下ではない折畳をいつ閉じるか。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
4. 折畳の振舞&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="fold.html#fold-behavior" name="fold-behavior">*fold-behavior*</a><br>
<br>
カーソルを上下に移動させたりスクロールさせると、カーソルは一連の折畳行の先頭へ<br>
移動する。カーソルが既に折畳の行にあれば、カーソルは次の折畳ではない行か、閉じ<br>
られた折畳へ移動する。<br>
<br>
折畳の行にカーソルがある時には、カーソルは常に先頭のカラムに表示される。ルー<br>
ラーは実際のカーソルの位置を示すが、行が折畳の場合には、そこに実際に表示するこ<br>
とはできない。<br>
<br>
移動コマンドは一連の折畳を空行として扱う。例えば、&quot;w&quot;コマンドは一旦先頭のカラ<br>
ムで停止する。<br>
<br>
挿入モードでは、カーソルのある行は決して折畳にならない。このため何を入力してい<br>
るかわからなくなることはない!<br>
<br>
オペレータを使用したときには、閉じた折畳は全体が含まれる。だから&quot;dl&quot;はカーソル<br>
の下の閉じた折畳の全体を削除してしまう。<br>
<br>
Exコマンドでは、開始位置と終了位置が折畳のそれに常に合わせられてしまう。<br>
だから次のコマンド:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:s/foo/bar/g</span><br>
カーソルを閉じた折畳に置いて実行すると、折畳内の全ての行にある&quot;foo&quot; が &quot;bar&quot;へ<br>
置き換えられてしまう。<br>
これは<a class="Identifier" href="fold.html#:folddoopen">|:folddoopen|</a>と<a class="Identifier" href="fold.html#:folddoclosed">|:folddoclosed|</a>に対してはあてはまらない。<br>
<br>
(同一セッション中で)以前に編集したバッファに対しては、最後の折畳設定が再び使用<br>
される。手動折畳では以前に定義された折畳が復元される。全ての折畳方法で、手動で<br>
開閉した折畳は復元される。同じウィンドウで同じバッファが編集される時は、以前の<br>
編集時の値が使用される。そうでなければそのウィンドウで最後に編集されていたバッ<br>
ファの値が使用される。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
&nbsp;vim&#0058;tw=78:ts=8:ft=help:norl:<br>
