---
layout: vimdoc
helpname: 'tips'
---
<a class="Constant" href="tips.html" name="tips.txt">*tips.txt*</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;<span class="Identifier">Vim バージョン 7.3.</span>&nbsp;&nbsp;Last change: 2009 Nov 07<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Identifier">VIM REFERENCE MANUAL&nbsp;&nbsp;&nbsp;&nbsp;by Bram Moolenaar</span><br>
<br>
<br>
Vim を使うときのヒントとアイディア&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#tips" name="tips">*tips*</a><br>
<br>
これは、多くのユーザーにとって便利だろうと思うこの一部です。wiki には<br>
もっと多くの tips があります。<span class="Constant"><a href="http://www.vim.org">http://www.vim.org</a></span><br>
<br>
ユーザーマニュアルも参照してください。ユーザーマニュアルにはたくさんのtipsが含<br>
まれています<a class="Identifier" href="usr_toc.html">|usr_toc.txt|</a>。<br>
<br>
C のプログラムを編集する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#C-editing">|C-editing|</a><br>
識別子が使われている場所を検索する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#ident-search">|ident-search|</a><br>
xterm でのスクリーンの切り替え&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#xterm-screens">|xterm-screens|</a><br>
挿入モードでスクロールさせる&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#scroll-insert">|scroll-insert|</a><br>
スムーズにスクロールさせる&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#scroll-smooth">|scroll-smooth|</a><br>
ありがちなタイプミスを修正する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#type-mistakes">|type-mistakes|</a><br>
単語や行の数を数える&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#count-items">|count-items|</a><br>
カーソルの位置を戻す&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#restore-position">|restore-position|</a><br>
ファイルをリネームする&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#rename-files">|rename-files|</a><br>
複数ファイル中の名前を置換する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#change-name">|change-name|</a><br>
外部コマンドの実行速度を速くする&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#speed-up">|speed-up|</a><br>
便利なマッピング&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#useful-mappings">|useful-mappings|</a><br>
ヘルプファイルを圧縮する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#gzip-helpfile">|gzip-helpfile|</a><br>
ウィンドウでシェルコマンドを実行する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#shell-window">|shell-window|</a><br>
16進編集&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#hex-editing">|hex-editing|</a><br>
オートコマンドで &lt;&gt; 表記を使う&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#autocmd-<>">|autocmd-&lt;&gt;|</a><br>
対応する括弧を強調する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="tips.html#match-parens">|match-parens|</a><br>
<br>
<span class="PreProc">==============================================================================</span><br>
C のプログラムを編集する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#C-editing" name="C-editing">*C-editing*</a><br>
<br>
Vim には C のプログラムファイルを編集するのを手助けする機能がたくさんあります。<br>
詳細をジャンプして確認できるようにタグつきで機能のあらましを紹介しましょう。<br>
<br>
<a class="Identifier" href="usr_29.html">|usr_29.txt|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ユーザーマニュアルの「プログラム内の移動」<br>
<a class="Identifier" href="usr_30.html">|usr_30.txt|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ユーザーマニュアルの「プログラムの編集」<br>
<a class="Identifier" href="indent.html#C-indenting">|C-indenting|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; テキストをタイプ中、自動的に行をインデントします。<br>
<a class="Identifier" href="change.html#=">|=|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 数行をインデントし直します。<br>
<a class="Identifier" href="change.html#format-comments">|format-comments|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; コメントを自動的にフォーマットします。<br>
<br>
<a class="Identifier" href="tagsrch.html#:checkpath">|:checkpath|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;再帰的にインクルードされるファイルをすべて表示します。<br>
<a class="Identifier" href="tagsrch.html#[i">|[i|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下にある単語と同じものを現在のファイルとイン<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;クルードされるファイルから探します。<br>
<a class="Identifier" href="tagsrch.html#[_CTRL-I">|[_CTRL-I|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;[i&quot; でマッチした場所にジャンプします。<br>
<a class="Identifier" href="tagsrch.html#[I">|[I|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下にある単語と同じものを現在のファイルとイン<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;クルードされるファイルから探し出しその行のリストを表示<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;します。<br>
<br>
<a class="Identifier" href="tagsrch.html#[d">|[d|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下の単語の定義を現在のファイルとインクルード<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;されるファイルから探します<br>
<a class="Identifier" href="tagsrch.html#CTRL-]">|CTRL-]|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下のタグにジャンプします。(例、関数の定義)<br>
<a class="Identifier" href="tagsrch.html#CTRL-T">|CTRL-T|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Special">CTRL-]</span>コマンドの前に戻ります。<br>
<a class="Identifier" href="tagsrch.html#:tselect">|:tselect|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;マッチしたタグのリストから一つ選びます。<br>
<br>
<a class="Identifier" href="pattern.html#gd">|gd|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下のローカル変数の宣言にジャンプする。<br>
<a class="Identifier" href="pattern.html#gD">|gD|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下のグローバル変数の宣言にジャンプする。<br>
<br>
<a class="Identifier" href="editing.html#gf">|gf|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;カーソルの下のファイル名にジャンプする。<br>
<br>
<a class="Identifier" href="motion.html#%">|%|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 対応する(),{},[],/* */, #if, #else, #endifに移動する。<br>
<a class="Identifier" href="motion.html#[/">|[/|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前のコメントが始まる場所に移動する。<br>
<a class="Identifier" href="motion.html#]/">|]/|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;次のコメントが終わる場所に移動する。<br>
<a class="Identifier" href="motion.html#[#">|[#|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前の閉じられていない #if, #ifdef, #else に移動する。<br>
<a class="Identifier" href="motion.html#]#">|]#|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;次の閉じられていない #else, #endif に移動する。<br>
<a class="Identifier" href="motion.html#[(">|[(|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前の閉じられていない '(' に移動する。<br>
<a class="Identifier" href="motion.html#])">|])|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;次の閉じられていない ')' に移動する。<br>
<a class="Identifier" href="motion.html#[{">|[{|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前の閉じられていない '{' に移動する。<br>
<a class="Identifier" href="motion.html#]}">|]}|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;次の閉じられていない '}' に移動する。<br>
<br>
<a class="Identifier" href="motion.html#v_ab">|v_ab|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;「ブロック(&quot;[(&quot;から&quot;])&quot;まで)」を括弧を含めて選択する。<br>
<a class="Identifier" href="motion.html#v_ib">|v_ib|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;「ブロック(&quot;[(&quot;から&quot;])&quot;まで)の内部」を選択する。<br>
<a class="Identifier" href="motion.html#v_aB">|v_aB|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;「ブロック(&quot;[{&quot;から&quot;]}&quot;まで)」を括弧を含めて選択する。<br>
<a class="Identifier" href="motion.html#v_iB">|v_iB|</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;「ブロック(&quot;[{&quot;から&quot;]}&quot;まで)の内部」を選択する。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
識別子が使われている場所を検索する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#ident-search" name="ident-search">*ident-search*</a><br>
<br>
<a class="Identifier" href="tagsrch.html#tags">|tags|</a>が関数や変数の定義された場所へのジャンプに使えることはすでにわかりました<br>
が、ときどき関数や変数が使われている場所にジャンプしたいことがあります。これ<br>
は二つの方法で実現することができます:<br>
1.&nbsp;<a class="Identifier" href="quickfix.html#:grep">|:grep|</a>を使う方法。この方法はほとんどの Unix システムでうまく動作しますが遅<br>
&nbsp;&nbsp; いですし(全てのファイルを読むため)、一つのディレクトリの中だけしか検索でき<br>
&nbsp;&nbsp; ません。<br>
2. ID ユーティリティを使う方法。この方法は速いですし複数のディレクトリを検索で<br>
&nbsp;&nbsp; きます。この方法は位置を記憶するためにデータベースを使用します。いくつかの<br>
&nbsp;&nbsp; プログラムを新たに入れる必要があります。そして、データベースを最新に保つこ<br>
&nbsp;&nbsp; とが要求されます。<br>
<br>
GNU id-tools と Vim を連動させる。<br>
<br>
必要なもの:<br>
- The GNU id-toolsがインストールされていること(IDを生成するにはmkidが必要でマ<br>
&nbsp;&nbsp;クロを使うのにlidが必要です)。<br>
- 現在のディレクトリに &quot;ID&quot; と呼ばれる識別子データベースファイルがあること。<br>
&nbsp;&nbsp;シェルコマンド&quot;mkid file1 file2 ..&quot;で作成可能です。<br>
<br>
次の行を .vimrc に追加してください。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map _u :call ID_search()&lt;Bar&gt;execute &quot;/\\&lt;&quot; . g:word . &quot;\\&gt;&quot;&lt;CR&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map _n :n&lt;Bar&gt;execute &quot;/\\&lt;&quot; . g:word . &quot;\\&gt;&quot;&lt;CR&gt;</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function! ID_search()</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let g:word = expand(&quot;&lt;cword&gt;&quot;)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let x = system(&quot;lid --key=none &quot;. g:word)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let x = substitute(x, &quot;\n&quot;, &quot; &quot;, &quot;g&quot;)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute &quot;next &quot; . x</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endfun</span><br>
<br>
これを使うには、単語上にカーソルを置いて、&quot;_u&quot;とタイプすればvimは単語を含んだ<br>
ファイルを読みこみます。同じファイルで次に単語が出てくるところを検索するには<br>
&quot;n&quot;をタイプします。&quot;_n&quot;で次のファイルに行きます。<br>
<br>
この方法は id-utils-3.2 を使って動作を確認しました (id-utlis-3.2 は id-tools<br>
アーカイブの名前です。近くの gnu-ftp-mirror から入手してください。)<br>
<br>
[このアイディアはAndreas Kutscheraさんから頂いたものです]<br>
<br>
<span class="PreProc">==============================================================================</span><br>
xterm でのスクリーンの切り替え&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#xterm-screens" name="xterm-screens">*xterm-screens*</a>&nbsp;<a class="Constant" href="tips.html#xterm-save-screen" name="xterm-save-screen">*xterm-save-screen*</a><br>
<br>
(comp.editors で質問に答えて Juergen Weigert 氏が投稿したもの)<br>
<br>
:&gt; もう一つの質問は vim を終了させた後にスクリーンがそのまま残っている<br>
:&gt; ことに関してです。例えばいままで見ていた(編集していた)内容がスクリ<br>
:&gt; ーンに残っていますよね。そして前に行った ls などのコマンドの出力が<br>
:&gt; 消えてしまうのです(例えばスクロールバッファからなくなってしまう)。<br>
:&gt; vim や他の vi 風のエディタでもどうにかして前の画面を復元する方法が<br>
:&gt; あるとは思うのですが、どのようにすれば実現できるのかわかりません。<br>
:&gt; 教えていただけると嬉しいです。それでは。<br>
:<br>
:どなたか詳しい方が答えて下さると思います。vim も vi も xterm の設定を<br>
:みて同じことをそれぞれやっていると思うのですが。<br>
<br>
これらは必ずしも同じ動作をするとは限りません、というのはこれは termcapと<br>
terminfo の問題であるかもしれないからです。個々のタイプのターミナルの属性を記<br>
述するデータベースには termcap と terminfoという二つのデータベースがあるという<br>
ことを知っておいてください。エントリーが異なっていて、かつ質問にあったプログラ<br>
ムのどれかが termcapを使っていて他のものがterminfo を使っていた場合、違う動作<br>
をすることになりえます。<br>
(<a class="Identifier" href="various.html#+terminfo">|+terminfo|</a>&nbsp;も参照してください)<br>
<br>
この問題の場合、^[[?47h と ^[[?47l というコントロールシーケンスが答えになりま<br>
す。これらはxtermのメインスクリーンバッファともう一方のバッファを切り替えるの<br>
に用いられます。簡単に動作させてみるには次のコマンドを打ってみてください、<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo -n &quot;^[[?47h&quot;; vim ... ; echo -n &quot;^[[?47l&quot;</span><br>
あなたが望む動作はこれかもしれません。 (ここで ^[ は ESC キャラクターを意味し<br>
ます。このあとデータベースではこの記号の代わりに \E を使っていることがわかるで<br>
しょう)<br>
<br>
起動時に vim は termcap の ti 変数(terminfo の場合: smcup) の値をecho し、終了<br>
時には te 変数(terminfo の場合: rmcup) の値をターミナルに echo します。という<br>
わけで、これらの二つの変数が上記のコントロールシーケンスを設定する正しい場所で<br>
す。<br>
<br>
xterm の termcap エントリー(/etc/termcap にあります) と xterm のterminfo エン<br>
トリー(infocmp -C xterm として入手します)とを比べてみてください。双方に次のよ<br>
うなエントリーが含まれている必要があります。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:te=\E[2J\E[?47l\E8:ti=\E7\E[?47h:</span><br>
<br>
追伸: もしなんらかの違いを見つけた場合、だれかが(システム管理者かな?) termcap<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;と terminfo データベースを継続的にチェックするようにした方がよいです。<br>
<br>
注1: feature.h で定義される FEAT_XTERM_SAVE をつけて Vim を再コンパイルすると<br>
内蔵の xterm は上記の &quot;te&quot; と &quot;ti&quot; エントリーを含むようになります。<br>
<br>
注2: スクリーンのスイッチを行わないようにし、termcap の変更も行いたくない場合<br>
次の行を .vimrc に加えてください。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set t_ti= t_te=</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
挿入モードでスクロールを行う&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#scroll-insert" name="scroll-insert">*scroll-insert*</a><br>
<br>
挿入モードでスクリーンの外の部分を見たい場合、<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-E</span>&nbsp;と&nbsp;<span class="Special">CTRL-X</span>&nbsp;<span class="Special">CTRL-Y</span><br>
を使うことでスクリーンをスクロールさせることができます。<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Identifier" href="insert.html#i_CTRL-X_CTRL-E">|i_CTRL-X_CTRL-E|</a><br>
<br>
これを簡単に行うには次のマッピングをすることができます:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inoremap &lt;C-E&gt; &lt;C-X&gt;&lt;C-E&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:inoremap &lt;C-Y&gt; &lt;C-X&gt;&lt;C-Y&gt;</span><br>
(文字通り入力するには、'&lt;'フラグが<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>にないことを確認してください)<br>
しかしこれを行うとカーソルの上/下の行のテキストをコピーする機能が使えなくなり<br>
ます。<br>
<a class="Identifier" href="insert.html#i_CTRL-E">|i_CTRL-E|</a>.<br>
<br>
カーソルの回りの前後を常に見渡せるように&nbsp;<a class="Type" href="options.html#'scrolloff'">'scrolloff'</a>&nbsp;オプションの値を大きい値<br>
に設定するのもよいです。<a class="Type" href="options.html#'scrolloff'">'scrolloff'</a>&nbsp;の値がウインドーの高さの半分以上に設定さ<br>
れているとカーソルが常にスクリーンの中央にあることになりテキストはカーソルの<br>
上下移動にあわせてスクロールすることになります。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
スムーズにスクロールさせる&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#scroll-smooth" name="scroll-smooth">*scroll-smooth*</a><br>
<br>
もう少しスムーズにスクロールさせたい場合、次のマッピングを使うこともできます:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map &lt;C-U&gt; &lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;&lt;C-Y&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map &lt;C-D&gt; &lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;&lt;C-E&gt;</span><br>
<br>
(文字通り入力するには、'&lt;'フラグが<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>にないことを確認してください)<br>
<br>
<span class="PreProc">==============================================================================</span><br>
ありがちなタイプミスを修正する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#type-mistakes" name="type-mistakes">*type-mistakes*</a><br>
<br>
しょっちゅう間違ってタイプする単語がいくつかあれば、略記を修正するのに利用しま<br>
しょう。例えば:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ab teh the</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ab fro for</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
単語や行などの数を数える&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#count-items" name="count-items">*count-items*</a><br>
<br>
カレントバッファの中になんらかのパターンがどのくらいの回数現れるのかを数えるに<br>
は、substituteコマンドを使い、実際に置換するのを避けるためにフラグ'n'をつけま<br>
す。報告される数がそのアイテムの数です。例:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/./&amp;/gn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文字</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/\i\+/&amp;/gn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 単語</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/^//n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;行</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/the/&amp;/gn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;the&quot;(どこかしら)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/\&lt;the\&gt;/&amp;/gn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;the&quot;(単語一致)</span><br>
<br>
<a class="Type" href="options.html#'hlsearch'">'hlsearch'</a>をリセットするか、&quot;:nohlsearch&quot;をしたくなるかもしれません。<br>
マッチが1個もないときにエラーになってほしくなければフラグ'e'をつけます。<br>
<br>
別の方法としては、ビジュアルモードで<a class="Identifier" href="editing.html#v_g_CTRL-G">|v_g_CTRL-G|</a>を使います。<br>
<br>
複数のファイルから検索したければ<a class="Identifier" href="quickfix.html#:vimgrep">|:vimgrep|</a>を使います。<br>
<br>
これは<a class="Type" href="options.html#'modifiable'">'modifiable'</a>オプションがオフのときは機能しません。代わりにビジュアルモー<br>
ドで<a class="Identifier" href="editing.html#v_g_CTRL-G">|v_g_CTRL-G|</a>を使ってください。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#count-bytes" name="count-bytes">*count-bytes*</a><br>
バイト数を数えるにはこれを使ってください。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文字列を選択してください(ブロック選択も使えます)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;y&quot;でコピーしてください<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;そして、strlen()を使います<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:echo strlen(@&quot;)</span><br>
改行は1バイトとして数えられます。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
カーソルの位置を戻す&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#restore-position" name="restore-position">*restore-position*</a><br>
<br>
ときにはファイルのどこかに変更を加えて、テキストをスクロールすることなくカーソ<br>
ルを元の位置に戻すようなマッピングを書きたくなることがあります。ファイルに書い<br>
た日付を変更する例をあげます:<br>
&nbsp;&nbsp; :map&nbsp;<span class="Special">&lt;F2&gt;</span>&nbsp;msHmtgg/Last&nbsp;<span class="Special">[cC]</span>hange:\s*/e+1<span class="Special">&lt;CR&gt;</span>&quot;_D&quot;=strftime(&quot;%Y %b %d&quot;)<span class="Special">&lt;CR&gt;</span>p'tzt`s<br>
<br>
位置を記憶する:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ms&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s'マークにカーソルの位置を記録します<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ウインドウに表示された最初の行に移動します<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;その行を't'マークに記録します<br>
<br>
位置を元に戻す:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先程のウインドウに表示された最初の行に移動します<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;その行がウインドウの最初に表示されるようにスクロールします<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最初の位置に戻ります<br>
<br>
より高度なことについては&nbsp;<a class="Identifier" href="eval.html#winsaveview()">|winsaveview()|</a>&nbsp;と&nbsp;<a class="Identifier" href="eval.html#winrestview()">|winrestview()|</a>&nbsp;を参照してくださ<br>
い。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
ファイルをリネームする&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#rename-files" name="rename-files">*rename-files*</a><br>
<br>
例えば以下のようなファイルを含むディレクトリがあるとします(ディレクトリはラン<br>
ダムに選び出したものです :-):<br>
<br>
buffer.c<br>
charset.c<br>
digraph.c<br>
...<br>
<br>
そして *.c を *.bla にリネームしたい場合次のようなコマンドを実行します:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ vim</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:r !ls *.c</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/\(.*\).c/mv &amp; \1.bla</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:w !sh</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:q!</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
複数ファイル中の名前を置換する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#change-name" name="change-name">*change-name*</a><br>
<br>
スクリプトファイルを使って複数ファイル中の名前を置換する例です:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以下のように置換コマンドと :update コマンドを含む &quot;subs.vim&quot; というファ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;イルを作成します:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/Jones/Smith/g</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s/Allen/Peter/g</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:update</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vim で置換したい全ファイルを開き、各引数に対してこのスクリプトを実行<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;します:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vim *.let</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argdo source subs.vim</span><br>
<br>
<a class="Identifier" href="editing.html#:argdo">|:argdo|</a>&nbsp;も参照。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
外部コマンドの実行をスピードアップする&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#speed-up" name="speed-up">*speed-up*</a><br>
<br>
いくつかの状況では外部コマンドの実行速度が非常に遅くなる場合があります。これは<br>
Unix でのワイルドカード展開が行われた場合もそうです。いくつかのスピードアップ<br>
する方法を紹介しましょう。<br>
<br>
もし .cshrc (もしくは他のファイル、使っているシェルによります)が非常に長いなら<br>
ばそれを対話的に使う部分とそうでない用途(セカンダリーシェルとよく呼ばれます)の<br>
部分にわけるべきです。Vim から &quot;:!ls&quot; のようなコマンドを実行する場合、対話的に<br>
行う必要はありませんよね(例えば、プロンプトを出させたり)。次の行の後にそれらを<br>
おくようにしてください。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($?prompt == 0) then</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit 0</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<br>
もう一つの方法は&nbsp;<a class="Type" href="options.html#'shell'">'shell'</a>&nbsp;オプションに &quot;-f&quot; フラグをつける方法です、例えば:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:set shell=csh\ -f</span><br>
<br>
(オプションの中にスペースを含めるにはバックスラッシュが必要です)<br>
こうすると csh が .cshrc ファイルを読み込まないようにすることができます。しか<br>
しこうすることでなんらかが動作しない場合もあるかもしれません。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
便利なマッピング&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#useful-mappings" name="useful-mappings">*useful-mappings*</a><br>
<br>
ここでいくつか好んで使われるマッピングを紹介します。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#map-backtick" name="map-backtick">*map-backtick*</a>&nbsp;<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map ' `</span><br>
シングル引用符の動作をバック引用符の動作のようにします。カーソルをマークがある<br>
行の最初の非空白文字に移動させるのではなく、マークがある桁位置に移動させます。<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#emacs-keys" name="emacs-keys">*emacs-keys*</a><br>
コマンドラインでのキーバインドを Emacs スタイルにします:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 行頭へ移動</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;C-A&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Home&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 一文字戻る</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;C-B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Left&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; カーソルの下の文字を削除</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;C-D&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Del&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 行末へ移動</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;C-E&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;End&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 一文字進む</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;C-F&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Right&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; コマンドライン履歴を一つ進む</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;C-N&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Down&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; コマンドライン履歴を一つ戻る</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;C-P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Up&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 前の単語へ移動</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;Esc&gt;&lt;C-B&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;S-Left&gt;</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 次の単語へ移動</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cnoremap &lt;Esc&gt;&lt;C-F&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;S-Right&gt;</span><br>
<br>
注: これを利用するには<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>から'&lt;'フラグを外しておく必要があります。<a class="Identifier" href="intro.html#<>">|&lt;&gt;|</a><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#format-bullet-list" name="format-bullet-list">*format-bullet-list*</a><br>
このマッピングはブレットリストのフォーマットを整えるものです。それぞれのリスト<br>
のエントリーの前後に空行がある必要があります。式が使われているのはマッピングを<br>
部分的に解説するコメントを入れるためです。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:let m =&nbsp;&nbsp;&nbsp;&nbsp; &quot;:map _f&nbsp;&nbsp;:set ai&lt;CR&gt;&quot;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 'autoindent' をセット</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:let m = m . &quot;{O&lt;Esc&gt;&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; アイテムの上に空行を挿入</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:let m = m . &quot;}{)^W&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; ブレットの後のテキストに移動</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:let m = m . &quot;i&nbsp;&nbsp;&nbsp;&nbsp;&lt;CR&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Esc&gt;&quot;&nbsp;&nbsp;&nbsp;&nbsp;&quot; インデントの為のスペースを挿入</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:let m = m . &quot;gq}&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; ブレットの後のテキストを整形</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:let m = m . &quot;{dd&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; 空行を削除</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:let m = m . &quot;5lDJ&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot; ブレットの後にテキストを置く</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:execute m&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&quot; マッピングを決定する</span><br>
<br>
(&lt;&gt; 表記法&nbsp;<a class="Identifier" href="intro.html#<>">|&lt;&gt;|</a>。これらは文字どおりにタイプするということに注意してください。<br>
^W は &quot;^&quot; &quot;W&quot; で&nbsp;<span class="Special">CTRL-W</span>&nbsp;ではありません。<a class="Type" href="options.html#'cpoptions'">'cpoptions'</a>&nbsp;に '&lt;' がなければ Vim にコ<br>
ピー/ペーストすることができますよ。)<br>
<br>
最後のコメントは |&quot; で始まっていることに注意してください、これは &quot;:execute&quot; コ<br>
マンドが直接のコメントを受け付けないからです。<br>
<br>
また&nbsp;<a class="Type" href="options.html#'textwidth'">'textwidth'</a>&nbsp;を 0 以外の値にしておく必要があります。例えば:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set tw=70</span><br>
<br>
最初の行からインデントすることになりますが次のようなマッピングでも同じことがで<br>
きます (注: このマッピングは多くのスペースを含む長い一つの行です):<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map _f :set ai&lt;CR&gt;}{a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Esc&gt;WWmmkD`mi&lt;CR&gt;&lt;Esc&gt;kkddpJgq}'mJO&lt;Esc&gt;j</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#collapse" name="collapse">*collapse*</a><br>
これら2つのマッピングは空行(;b)もしくは空白文字のみからなる行(;n)の連続を1行に<br>
します。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp; :map ;b&nbsp;&nbsp; GoZ&lt;Esc&gt;:g/^$/.,/./-j&lt;CR&gt;Gdd</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp; :map ;n&nbsp;&nbsp; GoZ&lt;Esc&gt;:g/^[ &lt;Tab&gt;]*$/.,/[^ &lt;Tab&gt;]/-j&lt;CR&gt;Gdd</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
ヘルプファイルを圧縮する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#gzip-helpfile" name="gzip-helpfile">*gzip-helpfile*</a><br>
<br>
ディスクスペースに空きがあまりない人はヘルプファイルを圧縮することができます。<br>
圧縮した後でもヘルプファイルを閲覧することはできます。ヘルプファイルへのアクセ<br>
スは少し遅くなります。また &quot;gzip&quot; プログラムが必要です。<br>
<br>
(1) すべてのヘルプファイルを圧縮するには: &quot;gzip doc/*.txt&quot;<br>
<br>
(2) &quot;doc/tags&quot; を編集して &quot;.txt&quot; を &quot;.txt.gz&quot; にします。<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:%s=\(\t.*\.txt\)\t=\1.gz\t=</span><br>
<br>
(3) 次の行を vimrc に追加します:<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set helpfile={dirname}/help.txt/gz</span><br>
<br>
<span class="Special">{dirname}</span>はヘルプファイルのある場所です。<a class="Identifier" href="pi_gzip.html#gzip">|gzip|</a>プラグインがファイルの解凍をし<br>
ます。それともし圧縮された &quot;doc&quot; ディレクトリと同じ場所に他のVim ファイルがな<br>
い場合、$VIMRUNTIME が他の Vim ファイルがある場所になるようにしておかなければ<br>
なりません。<a class="Identifier" href="starting.html#$VIMRUNTIME">|$VIMRUNTIME|</a>も参照してください。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
ウィンドーでシェルコマンドを実行する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#shell-window" name="shell-window">*shell-window*</a><br>
<br>
Vim の中のウインドーでシェルを起動できるかという質問がいままでに何度かありまし<br>
た。答えは、できないです。もしこれを実装しようとすればかなりおおくのコードを加<br>
えなければなりません、これが実装しない理由です。つまるところ、Vim はエディター<br>
なのです、エディターとしてではない作業を実行するようには考えられていません。し<br>
かしながら、同じようなことを実行するには &quot;splitvt&quot; プログラムを使って端末のス<br>
クリーンもしくはウインドーの表示を分割することができます。このプログラムはたぶ<br>
んどこかの ftp サーバーで見つけることができると思います。このプログラムに詳し<br>
いのは Sam Lantinga &lt;slouken@cs.ucdavis.edu&gt; です。もう一つの方法は &quot;window&quot;<br>
コマンドを利用する方法で、このコマンドは BSD Unix システムにあります。このコマ<br>
ンドは複数のウインドーをオーバーラップさせることができます。それか &quot;screen&quot; プ<br>
ログラムを使うかです。これは&nbsp;<span class="Constant">www.uni-erlangen.de</span>&nbsp;で見つけることができ、このプ<br>
ログラムでウインドーの積み重ねをすることができます。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
16進編集&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#hex-editing" name="hex-editing">*hex-editing*</a>&nbsp;<a class="Constant" href="tips.html#using-xxd" name="using-xxd">*using-xxd*</a><br>
<br>
ユーザーマニュアルの<a class="Identifier" href="usr_23.html#23.4">|23.4|</a>を参照してください。<br>
<br>
もしそのファイルがバイナリファイル特有の拡張子(exe、binなど)をしているときは、<br>
あなたの&lt;.vimrc&gt;に次のオートコマンドを加えることで、変換の過程を自動化しておく<br>
こともできます。&quot;*.bin&quot;をあなたの編集したいファイルの拡張子の、カンマで区切ら<br>
れたリストに変えてください:<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; vim -b : edit binary using xxd-format!</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;augroup Binary</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au!</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au BufReadPre&nbsp;&nbsp;*.bin let &amp;bin=1</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au BufReadPost *.bin if &amp;bin | %!xxd</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au BufReadPost *.bin set ft=xxd | endif</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au BufWritePre *.bin if &amp;bin | %!xxd -r</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au BufWritePre *.bin endif</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au BufWritePost *.bin if &amp;bin | %!xxd</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;au BufWritePost *.bin set nomod | endif</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;augroup END</span><br>
<br>
<span class="PreProc">==============================================================================</span><br>
オートコマンドで &lt;&gt; 表記を使う&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#autocmd-<>" name="autocmd-&lt;&gt;">*autocmd-&lt;&gt;*</a><br>
<br>
&lt;&gt; 表記は :autocmd の引数として使っても正しく解釈されません。特殊な文字を入力<br>
するのを避けるには、&lt;&gt; 表記をするための自己破壊的なマッピング行ってそれからオー<br>
トコマンドの中でそのマッピングを呼び出すことで実現することもできます。例:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#map-self-destroy" name="map-self-destroy">*map-self-destroy*</a>&nbsp;<br>
<span class="Comment">&nbsp;&quot; この方法はファイル名を自動的にメニューリストに追加するものです。</span><br>
<span class="Comment">&nbsp;&quot; 自己破壊的なマッピングを使っています!</span><br>
<span class="Comment">&nbsp;&quot; 1. ファイル名に含まれる 'dots' を \. に変更するためにバッファーの一つの</span><br>
<span class="Comment">&nbsp;&quot;&nbsp;&nbsp;&nbsp;&nbsp;行を使います。</span><br>
<span class="Comment">&nbsp;&quot; 2. それをレジスター '&quot;' に格納します。</span><br>
<span class="Comment">&nbsp;&quot; 3. その名前をバッファーメニューリストに追加します。</span><br>
<span class="Comment">&nbsp;&quot; 警告: この方法にはいくらか副作用があります。現在のレジスターの内容を上書</span><br>
<span class="Comment">&nbsp;&quot; きしたり &quot;i&quot; コマンドへのマッピングをすべて削除してしまったりします。</span><br>
<span class="Comment">&nbsp;&quot;</span><br>
<span class="Comment">&nbsp;autocmd BufNewFile,BufReadPre * nmap i :nunmap i&lt;CR&gt;O&lt;C-R&gt;%&lt;Esc&gt;:.g/\./s/\./\\./g&lt;CR&gt;0&quot;9y$u:menu Buffers.&lt;C-R&gt;9 :buffer &lt;C-R&gt;%&lt;C-V&gt;&lt;CR&gt;&lt;CR&gt;</span><br>
<span class="Comment">&nbsp;autocmd BufNewFile,BufReadPre * normal i</span><br>
<br>
もう一つのよりよい方法は &quot;:execute&quot; コマンドを使う方法です。文字列の中ではバッ<br>
クスラッシュを前置することで &lt;&gt; 表記が使えます。それまであったバックスラッシュ<br>
は \\ という風に2回重ねるのを忘れないでください。また '&quot;' の前にもバックスラッ<br>
シュを前置しなければなりません。<br>
<br>
<span class="Comment">&nbsp;autocmd BufNewFile,BufReadPre * exe &quot;normal O\&lt;C-R&gt;%\&lt;Esc&gt;:.g/\\./s/\\./\\\\./g\&lt;CR&gt;0\&quot;9y$u:menu Buffers.\&lt;C-R&gt;9 :buffer \&lt;C-R&gt;%\&lt;C-V&gt;\&lt;CR&gt;\&lt;CR&gt;&quot;</span><br>
<br>
実際のバッファメニューではユーザー定義関数を使うべきですが(<a class="Identifier" href="eval.html#:function">|:function|</a>を参照)、<br>
そうすると&lt;&gt;表記は使いませんので、ここでの例としてそれを使うのは不適切です。<br>
<br>
<span class="PreProc">==============================================================================</span><br>
対応する括弧を強調する&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="Constant" href="tips.html#match-parens" name="match-parens">*match-parens*</a><br>
<br>
この例はいくつかの高度なトリックを紹介しています。<br>
- 自動コマンドイベント<a class="Identifier" href="autocmd.html#CursorMoved">|CursorMoved|</a>の使い方<br>
-&nbsp;<a class="Identifier" href="eval.html#searchpairpos()">|searchpairpos()|</a>を使って対応する括弧を見つける方法<br>
-&nbsp;<a class="Identifier" href="eval.html#synID()">|synID()|</a>を使ってカーソルが文字列やコメントの中にあるかを判定する方法<br>
-&nbsp;<a class="Identifier" href="pattern.html#:match">|:match|</a>を使ってなにかを強調する方法<br>
-&nbsp;<a class="Identifier" href="pattern.html#pattern">|pattern|</a>を使ってファイルの特定の位置にマッチさせる方法<br>
<br>
これはスクリプトローカル変数を使っているので、Vimスクリプトファイル中に書かな<br>
ければなりません。カーソルが文字列やコメントの中にないならば、文字列やコメント<br>
はスキップして検索します。構文強調が有効になっている必要があります。<br>
<br>
これより若干高度なバージョンがプラグイン<a class="Identifier" href="pi_paren.html#matchparen">|matchparen|</a>の中で使われています。<br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let s:paren_hl_on = 0</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function s:Highlight_Matching_Paren()</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if s:paren_hl_on</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match none</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let s:paren_hl_on = 0</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c_lnum = line('.')</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c_col = col('.')</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c = getline(c_lnum)[c_col - 1]</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let plist = split(&amp;matchpairs, ':\|,')</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let i = index(plist, c)</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if i &lt; 0</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if i % 2 == 0</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let s_flags = 'nW'</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c2 = plist[i + 1]</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let s_flags = 'nbW'</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c2 = c</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c = plist[i - 1]</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if c == '['</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c = '\['</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let c2 = '\]'</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let s_skip ='synIDattr(synID(line(&quot;.&quot;), col(&quot;.&quot;), 0), &quot;name&quot;) ' .</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\ '=~?&nbsp;&nbsp;&quot;string\\|comment&quot;'</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute 'if' s_skip '| let s_skip = 0 | endif'</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let [m_lnum, m_col] = searchpairpos(c, '', c2, s_flags, s_skip)</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if m_lnum &gt; 0 &amp;&amp; m_lnum &gt;= line('w0') &amp;&amp; m_lnum &lt;= line('w$')</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exe 'match Search /\(\%' . c_lnum . 'l\%' . c_col .</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\ 'c\)\|\(\%' . m_lnum . 'l\%' . m_col . 'c\)/'</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let s:paren_hl_on = 1</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endif</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endfunction</span><br>
<br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autocmd CursorMoved,CursorMovedI * call s:Highlight_Matching_Paren()</span><br>
<span class="Comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;autocmd InsertEnter * match none</span><br>
&nbsp;&nbsp;<br>
<br>
&nbsp;vim&#0058;tw=78:ts=8:ft=help:norl:<br>
